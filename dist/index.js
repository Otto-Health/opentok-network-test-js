!function(root,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory():"function"==typeof define&&define.amd?define("OpenTokNetworkConnectivity",[],factory):"object"==typeof exports?exports.OpenTokNetworkConnectivity=factory():root.OpenTokNetworkConnectivity=factory()}("undefined"!=typeof self?self:this,function(){return function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=25)}([function(module,exports,__webpack_require__){"use strict";function isArray(val){return"[object Array]"===toString.call(val)}function isArrayBuffer(val){return"[object ArrayBuffer]"===toString.call(val)}function isFormData(val){return"undefined"!=typeof FormData&&val instanceof FormData}function isArrayBufferView(val){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(val):val&&val.buffer&&val.buffer instanceof ArrayBuffer}function isString(val){return"string"==typeof val}function isNumber(val){return"number"==typeof val}function isUndefined(val){return void 0===val}function isObject(val){return null!==val&&"object"===(void 0===val?"undefined":_typeof(val))}function isDate(val){return"[object Date]"===toString.call(val)}function isFile(val){return"[object File]"===toString.call(val)}function isBlob(val){return"[object Blob]"===toString.call(val)}function isFunction(val){return"[object Function]"===toString.call(val)}function isStream(val){return isObject(val)&&isFunction(val.pipe)}function isURLSearchParams(val){return"undefined"!=typeof URLSearchParams&&val instanceof URLSearchParams}function trim(str){return str.replace(/^\s*/,"").replace(/\s*$/,"")}function isStandardBrowserEnv(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function forEach(obj,fn){if(null!==obj&&void 0!==obj)if("object"!==(void 0===obj?"undefined":_typeof(obj))&&(obj=[obj]),isArray(obj))for(var i=0,l=obj.length;i<l;i++)fn.call(null,obj[i],i,obj);else for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&fn.call(null,obj[key],key,obj)}function merge(){function assignValue(val,key){"object"===_typeof(result[key])&&"object"===(void 0===val?"undefined":_typeof(val))?result[key]=merge(result[key],val):result[key]=val}for(var result={},i=0,l=arguments.length;i<l;i++)forEach(arguments[i],assignValue);return result}function extend(a,b,thisArg){return forEach(b,function(val,key){a[key]=thisArg&&"function"==typeof val?bind(val,thisArg):val}),a}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},bind=__webpack_require__(9),isBuffer=__webpack_require__(30),toString=Object.prototype.toString;module.exports={isArray:isArray,isArrayBuffer:isArrayBuffer,isBuffer:isBuffer,isFormData:isFormData,isArrayBufferView:isArrayBufferView,isString:isString,isNumber:isNumber,isObject:isObject,isUndefined:isUndefined,isDate:isDate,isFile:isFile,isBlob:isBlob,isFunction:isFunction,isStream:isStream,isURLSearchParams:isURLSearchParams,isStandardBrowserEnv:isStandardBrowserEnv,forEach:forEach,merge:merge,extend:extend,trim:trim}},function(module,exports,__webpack_require__){"use strict";function isArray(val){return"[object Array]"===toString.call(val)}function isArrayBuffer(val){return"[object ArrayBuffer]"===toString.call(val)}function isFormData(val){return"undefined"!=typeof FormData&&val instanceof FormData}function isArrayBufferView(val){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(val):val&&val.buffer&&val.buffer instanceof ArrayBuffer}function isString(val){return"string"==typeof val}function isNumber(val){return"number"==typeof val}function isUndefined(val){return void 0===val}function isObject(val){return null!==val&&"object"===(void 0===val?"undefined":_typeof(val))}function isDate(val){return"[object Date]"===toString.call(val)}function isFile(val){return"[object File]"===toString.call(val)}function isBlob(val){return"[object Blob]"===toString.call(val)}function isFunction(val){return"[object Function]"===toString.call(val)}function isStream(val){return isObject(val)&&isFunction(val.pipe)}function isURLSearchParams(val){return"undefined"!=typeof URLSearchParams&&val instanceof URLSearchParams}function trim(str){return str.replace(/^\s*/,"").replace(/\s*$/,"")}function isStandardBrowserEnv(){return"undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.createElement}function forEach(obj,fn){if(null!==obj&&void 0!==obj)if("object"===(void 0===obj?"undefined":_typeof(obj))||isArray(obj)||(obj=[obj]),isArray(obj))for(var i=0,l=obj.length;i<l;i++)fn.call(null,obj[i],i,obj);else for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&fn.call(null,obj[key],key,obj)}function merge(){function assignValue(val,key){"object"===_typeof(result[key])&&"object"===(void 0===val?"undefined":_typeof(val))?result[key]=merge(result[key],val):result[key]=val}for(var result={},i=0,l=arguments.length;i<l;i++)forEach(arguments[i],assignValue);return result}function extend(a,b,thisArg){return forEach(b,function(val,key){a[key]=thisArg&&"function"==typeof val?bind(val,thisArg):val}),a}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},bind=__webpack_require__(20),toString=Object.prototype.toString;module.exports={isArray:isArray,isArrayBuffer:isArrayBuffer,isFormData:isFormData,isArrayBufferView:isArrayBufferView,isString:isString,isNumber:isNumber,isObject:isObject,isUndefined:isUndefined,isDate:isDate,isFile:isFile,isBlob:isBlob,isFunction:isFunction,isStream:isStream,isURLSearchParams:isURLSearchParams,isStandardBrowserEnv:isStandardBrowserEnv,forEach:forEach,merge:merge,extend:extend,trim:trim}},function(module,exports,__webpack_require__){"use strict";function noop(){}function getThen(obj){try{return obj.then}catch(ex){return LAST_ERROR=ex,IS_ERROR}}function tryCallOne(fn,a){try{return fn(a)}catch(ex){return LAST_ERROR=ex,IS_ERROR}}function tryCallTwo(fn,a,b){try{fn(a,b)}catch(ex){return LAST_ERROR=ex,IS_ERROR}}function Promise(fn){if("object"!==_typeof(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof fn)throw new TypeError("Promise constructor's argument is not a function");this._75=0,this._83=0,this._18=null,this._38=null,fn!==noop&&doResolve(fn,this)}function safeThen(self,onFulfilled,onRejected){return new self.constructor(function(resolve,reject){var res=new Promise(noop);res.then(resolve,reject),handle(self,new Handler(onFulfilled,onRejected,res))})}function handle(self,deferred){for(;3===self._83;)self=self._18;if(Promise._47&&Promise._47(self),0===self._83)return 0===self._75?(self._75=1,void(self._38=deferred)):1===self._75?(self._75=2,void(self._38=[self._38,deferred])):void self._38.push(deferred);handleResolved(self,deferred)}function handleResolved(self,deferred){asap(function(){var cb=1===self._83?deferred.onFulfilled:deferred.onRejected;if(null===cb)return void(1===self._83?resolve(deferred.promise,self._18):reject(deferred.promise,self._18));var ret=tryCallOne(cb,self._18);ret===IS_ERROR?reject(deferred.promise,LAST_ERROR):resolve(deferred.promise,ret)})}function resolve(self,newValue){if(newValue===self)return reject(self,new TypeError("A promise cannot be resolved with itself."));if(newValue&&("object"===(void 0===newValue?"undefined":_typeof(newValue))||"function"==typeof newValue)){var then=getThen(newValue);if(then===IS_ERROR)return reject(self,LAST_ERROR);if(then===self.then&&newValue instanceof Promise)return self._83=3,self._18=newValue,void finale(self);if("function"==typeof then)return void doResolve(then.bind(newValue),self)}self._83=1,self._18=newValue,finale(self)}function reject(self,newValue){self._83=2,self._18=newValue,Promise._71&&Promise._71(self,newValue),finale(self)}function finale(self){if(1===self._75&&(handle(self,self._38),self._38=null),2===self._75){for(var i=0;i<self._38.length;i++)handle(self,self._38[i]);self._38=null}}function Handler(onFulfilled,onRejected,promise){this.onFulfilled="function"==typeof onFulfilled?onFulfilled:null,this.onRejected="function"==typeof onRejected?onRejected:null,this.promise=promise}function doResolve(fn,promise){var done=!1,res=tryCallTwo(fn,function(value){done||(done=!0,resolve(promise,value))},function(reason){done||(done=!0,reject(promise,reason))});done||res!==IS_ERROR||(done=!0,reject(promise,LAST_ERROR))}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},asap=__webpack_require__(15),LAST_ERROR=null,IS_ERROR={};module.exports=Promise,Promise._47=null,Promise._71=null,Promise._44=noop,Promise.prototype.then=function(onFulfilled,onRejected){if(this.constructor!==Promise)return safeThen(this,onFulfilled,onRejected);var res=new Promise(noop);return handle(this,new Handler(onFulfilled,onRejected,res)),res}},function(module,exports,__webpack_require__){"use strict";function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};Object.defineProperty(exports,"__esModule",{value:!0}),exports.assoc=function(key,value,obj){return Object.assign({},obj,_defineProperty({},key,value))},exports.assocPath=function(path,value,obj){var keys=path.split("."),key=keys[0];if(keys.length){if(1===keys.length)return exports.assoc(key,value,obj);var valForKey=exports.get(key,obj),base=valForKey&&"object"===(void 0===valForKey?"undefined":_typeof(valForKey))?valForKey:Object.assign({},obj,_defineProperty({},key,{})),update=exports.assoc(key,exports.assocPath(keys.slice(1).join("."),value,exports.get(key,base)),obj);return Object.assign({},obj,update)}return obj},exports.get=function(props,obj){var result=Object.assign({},obj);return("string"==typeof props?props.split("."):props).some(function(p){return void 0===(result=result[p])}),result},exports.getOr=function(defaultValue,props,obj){return exports.get(props,obj)||defaultValue},exports.pick=function(props,obj){var all=arguments.length>2&&void 0!==arguments[2]&&arguments[2],update=function(acc,prop){return void 0!==obj[prop]||all?Object.assign({},acc,_defineProperty({},prop,obj[prop])):acc};return props.reduce(update,{})},exports.pickAll=function(props,obj){return exports.pick(props,obj,!0)},exports.last=function(list){return list[list.length-1]},exports.nth=function(n,list){return n<0?list[list.length+n]:list[n]},exports.head=function(list){return exports.nth(0,list)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var config={getStatsInterval:1e3,getStatsVideoAndAudioTestDuration:3e4,getStatsAudioOnlyDuration:1e4,subscribeOptions:{testNetwork:!0,audioVolume:0},minimumVideoAndAudioTestSampleSize:5,steadyStateSampleWindow:5e3,steadyStateAllowedDelta:.05,qualityThresholds:{video:[{bps:1e6,plr:.005,recommendedSetting:"1280x720 @ 30FPS"},{bps:6e5,plr:.005,recommendedSetting:"640x480 @ 30FPS"},{bps:3e5,plr:.005,recommendedSetting:"320x240 @ 30FPS"},{bps:35e4,plr:.03,recommendedSetting:"1280x720 @ 30FPS"},{bps:25e4,plr:.03,recommendedSetting:"640x480 @ 30FPS"},{bps:15e4,plr:.03,recommendedSetting:"320x240 @ 30FPS"}],audio:[{bps:25e3,plr:.05}]},strings:{bandwidthLow:"Bandwidth too low.",noCam:"No camera was found.",noMic:"No microphone was found."}};exports.default=config},function(module,exports,__webpack_require__){"use strict";function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,runClearTimeout(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}var cachedSetTimeout,cachedClearTimeout,process=module.exports={};!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(name){return[]},process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},function(module,exports,__webpack_require__){"use strict";(function(process){function setContentTypeIfUnset(headers,value){!utils.isUndefined(headers)&&utils.isUndefined(headers["Content-Type"])&&(headers["Content-Type"]=value)}var utils=__webpack_require__(0),normalizeHeaderName=__webpack_require__(32),DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"},defaults={adapter:function(){var adapter;return"undefined"!=typeof XMLHttpRequest?adapter=__webpack_require__(10):void 0!==process&&(adapter=__webpack_require__(10)),adapter}(),transformRequest:[function(data,headers){return normalizeHeaderName(headers,"Content-Type"),utils.isFormData(data)||utils.isArrayBuffer(data)||utils.isBuffer(data)||utils.isStream(data)||utils.isFile(data)||utils.isBlob(data)?data:utils.isArrayBufferView(data)?data.buffer:utils.isURLSearchParams(data)?(setContentTypeIfUnset(headers,"application/x-www-form-urlencoded;charset=utf-8"),data.toString()):utils.isObject(data)?(setContentTypeIfUnset(headers,"application/json;charset=utf-8"),JSON.stringify(data)):data}],transformResponse:[function(data){if("string"==typeof data)try{data=JSON.parse(data)}catch(e){}return data}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(status){return status>=200&&status<300}};defaults.headers={common:{Accept:"application/json, text/plain, */*"}},utils.forEach(["delete","get","head"],function(method){defaults.headers[method]={}}),utils.forEach(["post","put","patch"],function(method){defaults.headers[method]=utils.merge(DEFAULT_CONTENT_TYPE)}),module.exports=defaults}).call(exports,__webpack_require__(5))},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var NetworkTestError=function(_Error){function NetworkTestError(message){_classCallCheck(this,NetworkTestError);var _this=_possibleConstructorReturn(this,(NetworkTestError.__proto__||Object.getPrototypeOf(NetworkTestError)).call(this,message));return Object.setPrototypeOf(_this,NetworkTestError.prototype),_this.name=_this.constructor.name,_this.stack=new Error(message).stack,_this}return _inherits(NetworkTestError,_Error),NetworkTestError}(Error);exports.NetworkTestError=NetworkTestError;var MissingOpenTokInstanceError=function(_NetworkTestError){function MissingOpenTokInstanceError(){return _classCallCheck(this,MissingOpenTokInstanceError),_possibleConstructorReturn(this,(MissingOpenTokInstanceError.__proto__||Object.getPrototypeOf(MissingOpenTokInstanceError)).call(this,"An instance of OT, the OpenTok.js client SDK, is required."))}return _inherits(MissingOpenTokInstanceError,_NetworkTestError),MissingOpenTokInstanceError}(NetworkTestError);exports.MissingOpenTokInstanceError=MissingOpenTokInstanceError;var IncompleteSessionCredentialsError=function(_NetworkTestError2){function IncompleteSessionCredentialsError(){return _classCallCheck(this,IncompleteSessionCredentialsError),_possibleConstructorReturn(this,(IncompleteSessionCredentialsError.__proto__||Object.getPrototypeOf(IncompleteSessionCredentialsError)).call(this,"NetworkConnectivity requires an apiKey, sessionId, and token."))}return _inherits(IncompleteSessionCredentialsError,_NetworkTestError2),IncompleteSessionCredentialsError}(NetworkTestError);exports.IncompleteSessionCredentialsError=IncompleteSessionCredentialsError;var MissingSessionCredentialsError=function(_NetworkTestError3){function MissingSessionCredentialsError(){return _classCallCheck(this,MissingSessionCredentialsError),_possibleConstructorReturn(this,(MissingSessionCredentialsError.__proto__||Object.getPrototypeOf(MissingSessionCredentialsError)).call(this,"NetworkConnectivity requires OpenTok session credentials."))}return _inherits(MissingSessionCredentialsError,_NetworkTestError3),MissingSessionCredentialsError}(NetworkTestError);exports.MissingSessionCredentialsError=MissingSessionCredentialsError;var InvalidSessionCredentialsError=function(_NetworkTestError4){function InvalidSessionCredentialsError(){return _classCallCheck(this,InvalidSessionCredentialsError),_possibleConstructorReturn(this,(InvalidSessionCredentialsError.__proto__||Object.getPrototypeOf(InvalidSessionCredentialsError)).call(this,"NetworkConnectivity session credentials must include an apiKey, sessionId, and token."))}return _inherits(InvalidSessionCredentialsError,_NetworkTestError4),InvalidSessionCredentialsError}(NetworkTestError);exports.InvalidSessionCredentialsError=InvalidSessionCredentialsError;var InvalidOnUpdateCallback=function(_NetworkTestError5){function InvalidOnUpdateCallback(){return _classCallCheck(this,InvalidOnUpdateCallback),_possibleConstructorReturn(this,(InvalidOnUpdateCallback.__proto__||Object.getPrototypeOf(InvalidOnUpdateCallback)).call(this,"The onUpdate callback must be a function that accepts a single parameter."))}return _inherits(InvalidOnUpdateCallback,_NetworkTestError5),InvalidOnUpdateCallback}(NetworkTestError);exports.InvalidOnUpdateCallback=InvalidOnUpdateCallback;var InvalidOnCompleteCallback=function(_NetworkTestError6){function InvalidOnCompleteCallback(){return _classCallCheck(this,InvalidOnCompleteCallback),_possibleConstructorReturn(this,(InvalidOnCompleteCallback.__proto__||Object.getPrototypeOf(InvalidOnCompleteCallback)).call(this,"The onComplete callback must be a function that accepts error and results parameters"))}return _inherits(InvalidOnCompleteCallback,_NetworkTestError6),InvalidOnCompleteCallback}(NetworkTestError);exports.InvalidOnCompleteCallback=InvalidOnCompleteCallback},function(module,exports,__webpack_require__){"use strict";(function(process){function setContentTypeIfUnset(headers,value){!utils.isUndefined(headers)&&utils.isUndefined(headers["Content-Type"])&&(headers["Content-Type"]=value)}var utils=__webpack_require__(1),normalizeHeaderName=__webpack_require__(68),PROTECTION_PREFIX=/^\)\]\}',?\n/,DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"},defaults={adapter:function(){var adapter;return"undefined"!=typeof XMLHttpRequest?adapter=__webpack_require__(21):void 0!==process&&(adapter=__webpack_require__(21)),adapter}(),transformRequest:[function(data,headers){return normalizeHeaderName(headers,"Content-Type"),utils.isFormData(data)||utils.isArrayBuffer(data)||utils.isStream(data)||utils.isFile(data)||utils.isBlob(data)?data:utils.isArrayBufferView(data)?data.buffer:utils.isURLSearchParams(data)?(setContentTypeIfUnset(headers,"application/x-www-form-urlencoded;charset=utf-8"),data.toString()):utils.isObject(data)?(setContentTypeIfUnset(headers,"application/json;charset=utf-8"),JSON.stringify(data)):data}],transformResponse:[function(data){if("string"==typeof data){data=data.replace(PROTECTION_PREFIX,"");try{data=JSON.parse(data)}catch(e){}}return data}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(status){return status>=200&&status<300}};defaults.headers={common:{Accept:"application/json, text/plain, */*"}},utils.forEach(["delete","get","head"],function(method){defaults.headers[method]={}}),utils.forEach(["post","put","patch"],function(method){defaults.headers[method]=utils.merge(DEFAULT_CONTENT_TYPE)}),module.exports=defaults}).call(exports,__webpack_require__(5))},function(module,exports,__webpack_require__){"use strict";module.exports=function(fn,thisArg){return function(){for(var args=new Array(arguments.length),i=0;i<args.length;i++)args[i]=arguments[i];return fn.apply(thisArg,args)}}},function(module,exports,__webpack_require__){"use strict";(function(process){var utils=__webpack_require__(0),settle=__webpack_require__(33),buildURL=__webpack_require__(35),parseHeaders=__webpack_require__(36),isURLSameOrigin=__webpack_require__(37),createError=__webpack_require__(11),btoa="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||__webpack_require__(38);module.exports=function(config){return new Promise(function(resolve,reject){var requestData=config.data,requestHeaders=config.headers;utils.isFormData(requestData)&&delete requestHeaders["Content-Type"];var request=new XMLHttpRequest,loadEvent="onreadystatechange",xDomain=!1;if("test"===process.env.NODE_ENV||"undefined"==typeof window||!window.XDomainRequest||"withCredentials"in request||isURLSameOrigin(config.url)||(request=new window.XDomainRequest,loadEvent="onload",xDomain=!0,request.onprogress=function(){},request.ontimeout=function(){}),config.auth){var username=config.auth.username||"",password=config.auth.password||"";requestHeaders.Authorization="Basic "+btoa(username+":"+password)}if(request.open(config.method.toUpperCase(),buildURL(config.url,config.params,config.paramsSerializer),!0),request.timeout=config.timeout,request[loadEvent]=function(){if(request&&(4===request.readyState||xDomain)&&(0!==request.status||request.responseURL&&0===request.responseURL.indexOf("file:"))){var responseHeaders="getAllResponseHeaders"in request?parseHeaders(request.getAllResponseHeaders()):null,responseData=config.responseType&&"text"!==config.responseType?request.response:request.responseText,response={data:responseData,status:1223===request.status?204:request.status,statusText:1223===request.status?"No Content":request.statusText,headers:responseHeaders,config:config,request:request};settle(resolve,reject,response),request=null}},request.onerror=function(){reject(createError("Network Error",config,null,request)),request=null},request.ontimeout=function(){reject(createError("timeout of "+config.timeout+"ms exceeded",config,"ECONNABORTED",request)),request=null},utils.isStandardBrowserEnv()){var cookies=__webpack_require__(39),xsrfValue=(config.withCredentials||isURLSameOrigin(config.url))&&config.xsrfCookieName?cookies.read(config.xsrfCookieName):void 0;xsrfValue&&(requestHeaders[config.xsrfHeaderName]=xsrfValue)}if("setRequestHeader"in request&&utils.forEach(requestHeaders,function(val,key){void 0===requestData&&"content-type"===key.toLowerCase()?delete requestHeaders[key]:request.setRequestHeader(key,val)}),config.withCredentials&&(request.withCredentials=!0),config.responseType)try{request.responseType=config.responseType}catch(e){if("json"!==config.responseType)throw e}"function"==typeof config.onDownloadProgress&&request.addEventListener("progress",config.onDownloadProgress),"function"==typeof config.onUploadProgress&&request.upload&&request.upload.addEventListener("progress",config.onUploadProgress),config.cancelToken&&config.cancelToken.promise.then(function(cancel){request&&(request.abort(),reject(cancel),request=null)}),void 0===requestData&&(requestData=null),request.send(requestData)})}}).call(exports,__webpack_require__(5))},function(module,exports,__webpack_require__){"use strict";var enhanceError=__webpack_require__(34);module.exports=function(message,config,code,request,response){var error=new Error(message);return enhanceError(error,config,code,request,response)}},function(module,exports,__webpack_require__){"use strict";module.exports=function(value){return!(!value||!value.__CANCEL__)}},function(module,exports,__webpack_require__){"use strict";function Cancel(message){this.message=message}Cancel.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Cancel.prototype.__CANCEL__=!0,module.exports=Cancel},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(47)},function(module,exports,__webpack_require__){"use strict";(function(global){function rawAsap(task){queue.length||(requestFlush(),flushing=!0),queue[queue.length]=task}function flush(){for(;index<queue.length;){var currentIndex=index;if(index+=1,queue[currentIndex].call(),index>capacity){for(var scan=0,newLength=queue.length-index;scan<newLength;scan++)queue[scan]=queue[scan+index];queue.length-=index,index=0}}queue.length=0,index=0,flushing=!1}function makeRequestCallFromTimer(callback){return function(){function handleTimer(){clearTimeout(timeoutHandle),clearInterval(intervalHandle),callback()}var timeoutHandle=setTimeout(handleTimer,0),intervalHandle=setInterval(handleTimer,50)}}module.exports=rawAsap;var requestFlush,queue=[],flushing=!1,index=0,capacity=1024,scope=void 0!==global?global:self,BrowserMutationObserver=scope.MutationObserver||scope.WebKitMutationObserver;requestFlush="function"==typeof BrowserMutationObserver?function(callback){var toggle=1,observer=new BrowserMutationObserver(callback),node=document.createTextNode("");return observer.observe(node,{characterData:!0}),function(){toggle=-toggle,node.data=toggle}}(flush):makeRequestCallFromTimer(flush),rawAsap.requestFlush=requestFlush,rawAsap.makeRequestCallFromTimer=makeRequestCallFromTimer}).call(exports,__webpack_require__(48))},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var util_1=__webpack_require__(3);!function(OTErrorType){OTErrorType.JS_EXCEPTION="JS_EXCEPTION",OTErrorType.AUTHENTICATION_ERROR="AUTHENTICATION_ERROR",OTErrorType.OT_AUTHENTICATION_ERROR="OT_AUTHENTICATION_ERROR",OTErrorType.OT_INVALID_HTTP_STATUS="OT_INVALID_HTTP_STATUS",OTErrorType.OT_CONNECT_FAILED="OT_CONNECT_FAILED",OTErrorType.INVALID_SESSION_ID="INVALID_SESSION_ID",OTErrorType.CONNECT_FAILED="CONNECT_FAILED",OTErrorType.CONNECT_REJECTED="CONNECT_REJECTED",OTErrorType.CONNECTION_TIMEOUT="CONNECTION_TIMEOUT",OTErrorType.NOT_CONNECTED="NOT_CONNECTED",OTErrorType.INVALID_PARAMETER="INVALID_PARAMETER",OTErrorType.P2P_CONNECTION_FAILED="P2P_CONNECTION_FAILED",OTErrorType.API_RESPONSE_FAILURE="API_RESPONSE_FAILURE",OTErrorType.TERMS_OF_SERVICE_FAILURE="TERMS_OF_SERVICE_FAILURE",OTErrorType.CONNECTION_LIMIT_EXCEEDED="CONNECTION_LIMIT_EXCEEDED",OTErrorType.UNABLE_TO_PUBLISH="UNABLE_TO_PUBLISH",OTErrorType.UNABLE_TO_SUBSCRIBE="UNABLE_TO_SUBSCRIBE",OTErrorType.UNSUPPORTED_VIDEO_CODEC="UNSUPPORTED_VIDEO_CODEC",OTErrorType.UNABLE_TO_FORCE_DISCONNECT="UNABLE_TO_FORCE_DISCONNECT",OTErrorType.UNABLE_TO_FORCE_UNPUBLISH="UNABLE_TO_FORCE_UNPUBLISH",OTErrorType.PUBLISHER_ICE_WORKFLOW_FAILED="PUBLISHER_ICE_WORKFLOW_FAILED",OTErrorType.SUBSCRIBER_ICE_WORKFLOW_FAILED="SUBSCRIBER_ICE_WORKFLOW_FAILED",OTErrorType.STREAM_LIMIT_EXCEEDED="STREAM_LIMIT_EXCEEDED",OTErrorType.UNEXPECTED_SERVER_RESPONSE="UNEXPECTED_SERVER_RESPONSE",OTErrorType.REPORT_ISSUE_ERROR="REPORT_ISSUE_ERROR",OTErrorType.ANVIL_BADLY_FORMED_RESPONSE="ANVIL_BADLY_FORMED_RESPONSE",OTErrorType.ANVIL_INVALID_HTTP_STATUS="ANVIL_INVALID_HTTP_STATUS",OTErrorType.ANVIL_XDOMAIN_OR_PARSING_ERROR="ANVIL_XDOMAIN_OR_PARSING_ERROR",OTErrorType.ANVIL_UNKNOWN_HTTP_ERROR="ANVIL_UNKNOWN_HTTP_ERROR",OTErrorType.ANVIL_UNEXPECTED_ERROR_CODE="ANVIL_UNEXPECTED_ERROR_CODE",OTErrorType.ANVIL_EMPTY_RESPONSE_BODY="ANVIL_EMPTY_RESPONSE_BODY",OTErrorType.ANVIL_CONNECT_FAILED="ANVIL_CONNECT_FAILED"}(exports.OTErrorType||(exports.OTErrorType={})),exports.errorHasName=function(){var error=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,name=arguments[1];return util_1.get("name",error)===name}},function(module,exports,__webpack_require__){"use strict";function getLatestSampleWindow(stats){var mostRecentTimestamp=util_1.getOr(0,"timestamp",util_1.last(stats)),oldestAllowedTime=mostRecentTimestamp-config_1.default.steadyStateSampleWindow;return stats.filter(function(stat){return stat.timestamp>=oldestAllowedTime})}Object.defineProperty(exports,"__esModule",{value:!0});var config_1=__webpack_require__(4),util_1=__webpack_require__(3);exports.default=getLatestSampleWindow},function(module,exports,__webpack_require__){"use strict";function calculateStats(type,samples){for(var qualityStats=[],i=1;i<samples.length;i+=1){var currStat=samples[i],prevStat=samples[i-1];if(currStat[type]&&prevStat[type]){var bytesIncreased=currStat[type].bytesReceived?currStat[type].bytesReceived-prevStat[type].bytesReceived:0,bitsIncreased=8*bytesIncreased,msIncreased=currStat.timestamp-prevStat.timestamp,secondsElapsed=msIncreased/1e3,averageBitrate=bitsIncreased/secondsElapsed,packetsReceived=currStat[type].packetsReceived,packetsLost=currStat[type].packetsLost,packetLossRatio=packetsLost/packetsReceived,frameRate="video"===type?{frameRate:currStat[type].frameRate}:{};qualityStats.push(Object.assign({averageBitrate:averageBitrate,packetLossRatio:packetLossRatio},frameRate))}}return qualityStats}function calculateQualityStats(latestSamples){if(latestSamples.length<2)throw new Error("Cannot calculate bitrate with less than two data points.");return{audio:calculateStats("audio",latestSamples),video:calculateStats("video",latestSamples)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=calculateQualityStats},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0});var MOSState=function(){function MOSState(){var _this=this;_classCallCheck(this,MOSState),this.stats={audio:{},video:{}},this.bandwidth={audio:0,video:0},this.hasAudioTrack=function(){return _this.statsLog[0]&&!!_this.statsLog[0].audio},this.hasVideoTrack=function(){return _this.statsLog[0]&&!!_this.statsLog[0].video},this.statsLog=[],this.audioScoresLog=[],this.videoScoresLog=[]}return _createClass(MOSState,[{key:"audioScore",value:function(){return this.audioScoresLog.reduce(function(acc,score){return acc+score},0)/this.audioScoresLog.length}},{key:"videoScore",value:function(){return this.videoScoresLog.reduce(function(acc,score){return acc+score},0)/this.videoScoresLog.length}},{key:"clearInterval",value:function(){this.intervalId&&window.clearInterval(this.intervalId),this.intervalId=void 0}},{key:"pruneAudioScores",value:function(){for(var audioScoresLog=this.audioScoresLog;audioScoresLog.length>MOSState.maxLogLength;)audioScoresLog.shift();this.audioScoresLog=audioScoresLog}},{key:"pruneVideoScores",value:function(){for(var videoScoresLog=this.videoScoresLog;videoScoresLog.length>MOSState.maxLogLength;)videoScoresLog.shift();this.videoScoresLog=videoScoresLog}},{key:"pruneScores",value:function(){this.pruneAudioScores(),this.pruneVideoScores()}},{key:"qualityScore",value:function(){var hasAudioTrack=this.hasAudioTrack(),hasVideoTrack=this.hasVideoTrack();return hasAudioTrack&&hasVideoTrack?Math.min(this.audioScore(),this.videoScore()):hasAudioTrack&&!hasVideoTrack?this.audioScore():!hasAudioTrack&&hasVideoTrack?this.videoScore():0}}]),MOSState}();MOSState.maxLogLength=1e3,MOSState.scoreInterval=1e3,exports.default=MOSState},function(module,exports,__webpack_require__){"use strict";module.exports=function(fn,thisArg){return function(){for(var args=new Array(arguments.length),i=0;i<args.length;i++)args[i]=arguments[i];return fn.apply(thisArg,args)}}},function(module,exports,__webpack_require__){"use strict";(function(process){var utils=__webpack_require__(1),settle=__webpack_require__(69),buildURL=__webpack_require__(71),parseHeaders=__webpack_require__(72),isURLSameOrigin=__webpack_require__(73),createError=__webpack_require__(22),btoa="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||__webpack_require__(74);module.exports=function(config){return new Promise(function(resolve,reject){var requestData=config.data,requestHeaders=config.headers;utils.isFormData(requestData)&&delete requestHeaders["Content-Type"];var request=new XMLHttpRequest,loadEvent="onreadystatechange",xDomain=!1;if("test"===process.env.NODE_ENV||"undefined"==typeof window||!window.XDomainRequest||"withCredentials"in request||isURLSameOrigin(config.url)||(request=new window.XDomainRequest,loadEvent="onload",xDomain=!0,request.onprogress=function(){},request.ontimeout=function(){}),config.auth){var username=config.auth.username||"",password=config.auth.password||"";requestHeaders.Authorization="Basic "+btoa(username+":"+password)}if(request.open(config.method.toUpperCase(),buildURL(config.url,config.params,config.paramsSerializer),!0),request.timeout=config.timeout,request[loadEvent]=function(){if(request&&(4===request.readyState||xDomain)&&(0!==request.status||request.responseURL&&0===request.responseURL.indexOf("file:"))){var responseHeaders="getAllResponseHeaders"in request?parseHeaders(request.getAllResponseHeaders()):null,responseData=config.responseType&&"text"!==config.responseType?request.response:request.responseText,response={data:responseData,status:1223===request.status?204:request.status,statusText:1223===request.status?"No Content":request.statusText,headers:responseHeaders,config:config,request:request};settle(resolve,reject,response),request=null}},request.onerror=function(){reject(createError("Network Error",config)),request=null},request.ontimeout=function(){reject(createError("timeout of "+config.timeout+"ms exceeded",config,"ECONNABORTED")),request=null},utils.isStandardBrowserEnv()){var cookies=__webpack_require__(75),xsrfValue=(config.withCredentials||isURLSameOrigin(config.url))&&config.xsrfCookieName?cookies.read(config.xsrfCookieName):void 0;xsrfValue&&(requestHeaders[config.xsrfHeaderName]=xsrfValue)}if("setRequestHeader"in request&&utils.forEach(requestHeaders,function(val,key){void 0===requestData&&"content-type"===key.toLowerCase()?delete requestHeaders[key]:request.setRequestHeader(key,val)}),config.withCredentials&&(request.withCredentials=!0),config.responseType)try{request.responseType=config.responseType}catch(e){if("json"!==request.responseType)throw e}"function"==typeof config.onDownloadProgress&&request.addEventListener("progress",config.onDownloadProgress),"function"==typeof config.onUploadProgress&&request.upload&&request.upload.addEventListener("progress",config.onUploadProgress),config.cancelToken&&config.cancelToken.promise.then(function(cancel){request&&(request.abort(),reject(cancel),request=null)}),void 0===requestData&&(requestData=null),request.send(requestData)})}}).call(exports,__webpack_require__(5))},function(module,exports,__webpack_require__){"use strict";var enhanceError=__webpack_require__(70);module.exports=function(message,config,code,response){var error=new Error(message);return enhanceError(error,config,code,response)}},function(module,exports,__webpack_require__){"use strict";module.exports=function(value){return!(!value||!value.__CANCEL__)}},function(module,exports,__webpack_require__){"use strict";function Cancel(message){this.message=message}Cancel.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Cancel.prototype.__CANCEL__=!0,module.exports=Cancel},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();Object.defineProperty(exports,"__esModule",{value:!0});var version=__webpack_require__(26).version,testConnectivity_1=__webpack_require__(27),testQuality_1=__webpack_require__(57),errors_1=__webpack_require__(7),OTKAnalytics=__webpack_require__(64),NetworkTest=function(){function NetworkTest(OT,credentials){_classCallCheck(this,NetworkTest),this.validateOT(OT),this.validateCredentials(credentials),this.otLogging=this.startLoggingEngine(credentials.apiKey,credentials.sessionId),this.OT=OT,this.credentials=credentials}return _createClass(NetworkTest,[{key:"validateOT",value:function(OT){if(!OT||"object"!==(void 0===OT?"undefined":_typeof(OT))||!OT.initSession)throw new errors_1.MissingOpenTokInstanceError}},{key:"validateCredentials",value:function(credentials){if(!credentials)throw new errors_1.MissingSessionCredentialsError;if(!credentials.apiKey||!credentials.sessionId||!credentials.token)throw new errors_1.IncompleteSessionCredentialsError}},{key:"validateCallbacks",value:function(action,updateCallback,onComplete){if(updateCallback&&("function"!=typeof updateCallback||1!==updateCallback.length))throw this.otLogging.logEvent({action:action,variation:"Failure"}),new errors_1.InvalidOnUpdateCallback;if(onComplete&&("function"!=typeof onComplete||2!==onComplete.length))throw this.otLogging.logEvent({action:action,variation:"Failure"}),new errors_1.InvalidOnCompleteCallback}},{key:"startLoggingEngine",value:function(apiKey,sessionId){return new OTKAnalytics({sessionId:sessionId,partnerId:apiKey,source:window.location.href,clientVersion:"js-network-test-"+version,name:"opentok-network-test",componentId:"opentok-network-test"})}},{key:"testConnectivity",value:function(onComplete){return this.otLogging.logEvent({action:"testConnectivity",variation:"Attempt"}),this.validateCallbacks("testConnectivity",void 0,onComplete),testConnectivity_1.testConnectivity(this.OT,this.credentials,this.otLogging,onComplete)}},{key:"testQuality",value:function(updateCallback,completionCallback){return this.otLogging.logEvent({action:"testQuality",variation:"Attempt"}),this.validateCallbacks("testQuality",updateCallback,completionCallback),testQuality_1.default(this.OT,this.credentials,this.otLogging,updateCallback,completionCallback)}}]),NetworkTest}();exports.default=NetworkTest},function(module,exports){module.exports={name:"opentok-network-test-js",version:"1.0.8",description:"Precall network test for applications using the OpenTok platform.",main:"dist/index.js",scripts:{build:"webpack --config webpack.config.js",docs:"open dist/docs/index.html","test-setup":"node test/setup/setup.js","test-teardown":"rm test/credentials.json",karma:"karma start",test:"npm run test-setup && npm run karma && npm run test-teardown"},repository:{type:"git",url:"git+https://github.com/opentok/opentok-network-test-js.git"},keywords:["tokbox","opentok","network test","connectivity","webrtc"],author:{name:"TokBox",email:"contact@tokbox.com"},license:"MIT",bugs:{url:"https://github.com/opentok/network-connectivity-js/issues"},homepage:"https://github.com/opentok/network-connectivity-js#readme",dependencies:{axios:"^0.17.1","opentok-solutions-logging":"^1.0.12",promise:"^8.0.1"},devDependencies:{"@opentok/client":"^2.13.2","@types/axios":"^0.14.0","@types/opentok":"^2.3.4","@types/webrtc":"0.0.22","babel-core":"^6.26.0","babel-loader":"^7.1.4","babel-preset-env":"^1.6.1",dotenv:"^4.0.0","fs-extra":"^4.0.3",jasmine:"^2.99.0","jasmine-core":"^2.99.1",karma:"^1.7.1","karma-chrome-launcher":"^2.2.0","karma-cli":"^1.0.1","karma-firefox-launcher":"^1.1.0","karma-jasmine":"^1.1.1","karma-mocha-reporter":"^2.2.5","karma-safari-launcher":"^1.0.0","karma-safaritechpreview-launcher":"0.0.6","karma-sauce-launcher":"^1.2.0","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^2.0.13",opentok:"^2.6.2","string-replace-loader":"^1.3.0","ts-loader":"^3.5.0",tslint:"^5.9.1","tslint-config-airbnb":"^5.7.0",typedoc:"^0.11.0","typedoc-plugin-external-module-name":"^1.1.1","typedoc-webpack-plugin":"^1.1.4",typescript:"^2.7.2",webpack:"^3.11.0"}}},function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function disconnectFromSession(session){return new Promise(function(resolve,reject){session.on("sessionDisconnected",function(){session.off(),resolve()}),session.disconnect()})}function connectToSession(OT,_ref){var apiKey=_ref.apiKey,sessionId=_ref.sessionId,token=_ref.token;return new Promise(function(resolve,reject){var session=OT.initSession(apiKey,sessionId);session.connect(token,function(error){types_1.errorHasName(error,types_1.OTErrorType.OT_AUTHENTICATION_ERROR)?reject(new e.ConnectToSessionTokenError):types_1.errorHasName(error,types_1.OTErrorType.INVALID_SESSION_ID)?reject(new e.ConnectToSessionSessionIdError):types_1.errorHasName(error,types_1.OTErrorType.OT_CONNECT_FAILED)?reject(new e.ConnectToSessionNetworkError):types_1.errorHasName(error,types_1.OTErrorType.OT_INVALID_HTTP_STATUS)?reject(new e.APIConnectivityError):error?reject(new e.ConnectToSessionError):resolve(session)})})}function validateDevices(OT){return new Promise(function(resolve,reject){OT.getDevices(function(error){var devices=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(error)reject(new e.FailedToObtainMediaDevices);else{var availableDevices=devices.reduce(function(acc,device){var type="audioInput"===device.kind?"audio":"video";return Object.assign({},acc,_defineProperty({},type,Object.assign({},acc[type],_defineProperty({},device.deviceId,device))))},{audio:{},video:{}});Object.keys(availableDevices.audio).length?Object.keys(availableDevices.video).length?resolve():reject(new e.NoVideoCaptureDevicesError):reject(new e.NoAudioCaptureDevicesError)}})})}function checkCreateLocalPublisher(OT){return new Promise(function(resolve,reject){validateDevices(OT).then(function(){var publisherDiv=document.createElement("div");publisherDiv.style.position="fixed",publisherDiv.style.bottom="-1px",publisherDiv.style.width="1px",publisherDiv.style.height="1px",publisherDiv.style.opacity="0.01",document.body.appendChild(publisherDiv);var publisherOptions={width:"100%",height:"100%",insertMode:"append",showControls:!1},publisher=OT.initPublisher(publisherDiv,publisherOptions,function(error){error?reject(new e.FailedToCreateLocalPublisher):resolve({publisher:publisher})});publisher.on("streamCreated",function(){publisherDiv.style.visibility="hidden"})}).catch(reject)})}function checkPublishToSession(OT,session){return new Promise(function(resolve,reject){var disconnectAndReject=function(rejectError){disconnectFromSession(session).then(function(){reject(rejectError)})};checkCreateLocalPublisher(OT).then(function(_ref2){var publisher=_ref2.publisher;session.publish(publisher,function(error){error?types_1.errorHasName(error,types_1.OTErrorType.NOT_CONNECTED)?disconnectAndReject(new e.PublishToSessionNotConnectedError):types_1.errorHasName(error,types_1.OTErrorType.UNABLE_TO_PUBLISH)?disconnectAndReject(new e.PublishToSessionPermissionOrTimeoutError):error&&disconnectAndReject(new e.PublishToSessionError):resolve(Object.assign({session:session},{publisher:publisher}))})}).catch(function(error){disconnectAndReject(error)})})}function checkSubscribeToSession(_ref3){var session=_ref3.session,publisher=_ref3.publisher;return new Promise(function(resolve,reject){var config={testNetwork:!0,audioVolume:0},disconnectAndReject=function(rejectError){disconnectFromSession(session).then(function(){reject(rejectError)})};if(publisher.stream)var subscriberDiv=document.createElement("div"),subscriber=session.subscribe(publisher.stream,subscriberDiv,config,function(error){error?disconnectAndReject(new e.SubscribeToSessionError):resolve(Object.assign({session:session},{publisher:publisher},{subscriber:subscriber}))});else disconnectAndReject(new e.SubscribeToSessionError)})}function checkLoggingServer(OT,input){return new Promise(function(resolve,reject){var url=OT.properties.loggingURL+"/logging/ClientEvent",handleError=function(){return reject(new e.LoggingServerConnectionError)};axios_1.default.post(url).then(function(response){return 200===response.status?resolve(input):handleError()}).catch(handleError)})}function testConnectivity(OT,credentials,otLogging,onComplete){return new Promise(function(resolve,reject){var onSuccess=function(flowResults){var results={success:!0,failedTests:[]};return otLogging.logEvent({action:"testConnectivity",variation:"Success"}),disconnectFromSession(flowResults.session).then(function(){return onComplete&&onComplete(void 0,results),resolve(results)})},onFailure=function(error){var handleResults=function(){var baseFailures=mapping_1.mapErrors.apply(mapping_1,arguments),messagingFailure=baseFailures.find(function(c){return"messaging"===c.type}),failedTests=[].concat(_toConsumableArray(baseFailures),_toConsumableArray(messagingFailure?mapping_1.mapErrors(new e.FailedMessagingServerTestError):[])),results={failedTests:failedTests,success:!1};onComplete&&onComplete(void 0,results),otLogging.logEvent({action:"testConnectivity",variation:"Success"}),resolve(results)};"LoggingServerConnectionError"===error.name?handleResults(error):checkLoggingServer(OT).then(function(){return handleResults(error)}).catch(function(loggingError){return handleResults(error,loggingError)})};connectToSession(OT,credentials).then(function(session){return checkPublishToSession(OT,session)}).then(checkSubscribeToSession).then(function(results){return checkLoggingServer(OT,results)}).then(onSuccess).catch(onFailure)})}Object.defineProperty(exports,"__esModule",{value:!0});var axios_1=__webpack_require__(28),Promise=__webpack_require__(14),e=__webpack_require__(55),types_1=__webpack_require__(16),mapping_1=__webpack_require__(56);exports.testConnectivity=testConnectivity},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(29)},function(module,exports,__webpack_require__){"use strict";function createInstance(defaultConfig){var context=new Axios(defaultConfig),instance=bind(Axios.prototype.request,context);return utils.extend(instance,Axios.prototype,context),utils.extend(instance,context),instance}var utils=__webpack_require__(0),bind=__webpack_require__(9),Axios=__webpack_require__(31),defaults=__webpack_require__(6),axios=createInstance(defaults);axios.Axios=Axios,axios.create=function(instanceConfig){return createInstance(utils.merge(defaults,instanceConfig))},axios.Cancel=__webpack_require__(13),axios.CancelToken=__webpack_require__(45),axios.isCancel=__webpack_require__(12),axios.all=function(promises){return Promise.all(promises)},axios.spread=__webpack_require__(46),module.exports=axios,module.exports.default=axios},function(module,exports,__webpack_require__){"use strict";function isBuffer(obj){return!!obj.constructor&&"function"==typeof obj.constructor.isBuffer&&obj.constructor.isBuffer(obj)}function isSlowBuffer(obj){return"function"==typeof obj.readFloatLE&&"function"==typeof obj.slice&&isBuffer(obj.slice(0,0))}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
module.exports=function(obj){return null!=obj&&(isBuffer(obj)||isSlowBuffer(obj)||!!obj._isBuffer)}},function(module,exports,__webpack_require__){"use strict";function Axios(instanceConfig){this.defaults=instanceConfig,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}var defaults=__webpack_require__(6),utils=__webpack_require__(0),InterceptorManager=__webpack_require__(40),dispatchRequest=__webpack_require__(41);Axios.prototype.request=function(config){"string"==typeof config&&(config=utils.merge({url:arguments[0]},arguments[1])),config=utils.merge(defaults,this.defaults,{method:"get"},config),config.method=config.method.toLowerCase();var chain=[dispatchRequest,void 0],promise=Promise.resolve(config);for(this.interceptors.request.forEach(function(interceptor){chain.unshift(interceptor.fulfilled,interceptor.rejected)}),this.interceptors.response.forEach(function(interceptor){chain.push(interceptor.fulfilled,interceptor.rejected)});chain.length;)promise=promise.then(chain.shift(),chain.shift());return promise},utils.forEach(["delete","get","head","options"],function(method){Axios.prototype[method]=function(url,config){return this.request(utils.merge(config||{},{method:method,url:url}))}}),utils.forEach(["post","put","patch"],function(method){Axios.prototype[method]=function(url,data,config){return this.request(utils.merge(config||{},{method:method,url:url,data:data}))}}),module.exports=Axios},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(0);module.exports=function(headers,normalizedName){utils.forEach(headers,function(value,name){name!==normalizedName&&name.toUpperCase()===normalizedName.toUpperCase()&&(headers[normalizedName]=value,delete headers[name])})}},function(module,exports,__webpack_require__){"use strict";var createError=__webpack_require__(11);module.exports=function(resolve,reject,response){var validateStatus=response.config.validateStatus;response.status&&validateStatus&&!validateStatus(response.status)?reject(createError("Request failed with status code "+response.status,response.config,null,response.request,response)):resolve(response)}},function(module,exports,__webpack_require__){"use strict";module.exports=function(error,config,code,request,response){return error.config=config,code&&(error.code=code),error.request=request,error.response=response,error}},function(module,exports,__webpack_require__){"use strict";function encode(val){return encodeURIComponent(val).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var utils=__webpack_require__(0);module.exports=function(url,params,paramsSerializer){if(!params)return url;var serializedParams;if(paramsSerializer)serializedParams=paramsSerializer(params);else if(utils.isURLSearchParams(params))serializedParams=params.toString();else{var parts=[];utils.forEach(params,function(val,key){null!==val&&void 0!==val&&(utils.isArray(val)&&(key+="[]"),utils.isArray(val)||(val=[val]),utils.forEach(val,function(v){utils.isDate(v)?v=v.toISOString():utils.isObject(v)&&(v=JSON.stringify(v)),parts.push(encode(key)+"="+encode(v))}))}),serializedParams=parts.join("&")}return serializedParams&&(url+=(-1===url.indexOf("?")?"?":"&")+serializedParams),url}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(0),ignoreDuplicateOf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];module.exports=function(headers){var key,val,i,parsed={};return headers?(utils.forEach(headers.split("\n"),function(line){if(i=line.indexOf(":"),key=utils.trim(line.substr(0,i)).toLowerCase(),val=utils.trim(line.substr(i+1)),key){if(parsed[key]&&ignoreDuplicateOf.indexOf(key)>=0)return;parsed[key]="set-cookie"===key?(parsed[key]?parsed[key]:[]).concat([val]):parsed[key]?parsed[key]+", "+val:val}}),parsed):parsed}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(0);module.exports=utils.isStandardBrowserEnv()?function(){function resolveURL(url){var href=url;return msie&&(urlParsingNode.setAttribute("href",href),href=urlParsingNode.href),urlParsingNode.setAttribute("href",href),{href:urlParsingNode.href,protocol:urlParsingNode.protocol?urlParsingNode.protocol.replace(/:$/,""):"",host:urlParsingNode.host,search:urlParsingNode.search?urlParsingNode.search.replace(/^\?/,""):"",hash:urlParsingNode.hash?urlParsingNode.hash.replace(/^#/,""):"",hostname:urlParsingNode.hostname,port:urlParsingNode.port,pathname:"/"===urlParsingNode.pathname.charAt(0)?urlParsingNode.pathname:"/"+urlParsingNode.pathname}}var originURL,msie=/(msie|trident)/i.test(navigator.userAgent),urlParsingNode=document.createElement("a");return originURL=resolveURL(window.location.href),function(requestURL){var parsed=utils.isString(requestURL)?resolveURL(requestURL):requestURL;return parsed.protocol===originURL.protocol&&parsed.host===originURL.host}}():function(){return function(){return!0}}()},function(module,exports,__webpack_require__){"use strict";function E(){this.message="String contains an invalid character"}function btoa(input){for(var block,charCode,str=String(input),output="",idx=0,map=chars;str.charAt(0|idx)||(map="=",idx%1);output+=map.charAt(63&block>>8-idx%1*8)){if((charCode=str.charCodeAt(idx+=.75))>255)throw new E;block=block<<8|charCode}return output}var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";E.prototype=new Error,E.prototype.code=5,E.prototype.name="InvalidCharacterError",module.exports=btoa},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(0);module.exports=utils.isStandardBrowserEnv()?function(){return{write:function(name,value,expires,path,domain,secure){var cookie=[];cookie.push(name+"="+encodeURIComponent(value)),utils.isNumber(expires)&&cookie.push("expires="+new Date(expires).toGMTString()),utils.isString(path)&&cookie.push("path="+path),utils.isString(domain)&&cookie.push("domain="+domain),!0===secure&&cookie.push("secure"),document.cookie=cookie.join("; ")},read:function(name){var match=document.cookie.match(new RegExp("(^|;\\s*)("+name+")=([^;]*)"));return match?decodeURIComponent(match[3]):null},remove:function(name){this.write(name,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(module,exports,__webpack_require__){"use strict";function InterceptorManager(){this.handlers=[]}var utils=__webpack_require__(0);InterceptorManager.prototype.use=function(fulfilled,rejected){return this.handlers.push({fulfilled:fulfilled,rejected:rejected}),this.handlers.length-1},InterceptorManager.prototype.eject=function(id){this.handlers[id]&&(this.handlers[id]=null)},InterceptorManager.prototype.forEach=function(fn){utils.forEach(this.handlers,function(h){null!==h&&fn(h)})},module.exports=InterceptorManager},function(module,exports,__webpack_require__){"use strict";function throwIfCancellationRequested(config){config.cancelToken&&config.cancelToken.throwIfRequested()}var utils=__webpack_require__(0),transformData=__webpack_require__(42),isCancel=__webpack_require__(12),defaults=__webpack_require__(6),isAbsoluteURL=__webpack_require__(43),combineURLs=__webpack_require__(44);module.exports=function(config){return throwIfCancellationRequested(config),config.baseURL&&!isAbsoluteURL(config.url)&&(config.url=combineURLs(config.baseURL,config.url)),config.headers=config.headers||{},config.data=transformData(config.data,config.headers,config.transformRequest),config.headers=utils.merge(config.headers.common||{},config.headers[config.method]||{},config.headers||{}),utils.forEach(["delete","get","head","post","put","patch","common"],function(method){delete config.headers[method]}),(config.adapter||defaults.adapter)(config).then(function(response){return throwIfCancellationRequested(config),response.data=transformData(response.data,response.headers,config.transformResponse),response},function(reason){return isCancel(reason)||(throwIfCancellationRequested(config),reason&&reason.response&&(reason.response.data=transformData(reason.response.data,reason.response.headers,config.transformResponse))),Promise.reject(reason)})}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(0);module.exports=function(data,headers,fns){return utils.forEach(fns,function(fn){data=fn(data,headers)}),data}},function(module,exports,__webpack_require__){"use strict";module.exports=function(url){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(url)}},function(module,exports,__webpack_require__){"use strict";module.exports=function(baseURL,relativeURL){return relativeURL?baseURL.replace(/\/+$/,"")+"/"+relativeURL.replace(/^\/+/,""):baseURL}},function(module,exports,__webpack_require__){"use strict";function CancelToken(executor){if("function"!=typeof executor)throw new TypeError("executor must be a function.");var resolvePromise;this.promise=new Promise(function(resolve){resolvePromise=resolve});var token=this;executor(function(message){token.reason||(token.reason=new Cancel(message),resolvePromise(token.reason))})}var Cancel=__webpack_require__(13);CancelToken.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},CancelToken.source=function(){var cancel;return{token:new CancelToken(function(c){cancel=c}),cancel:cancel}},module.exports=CancelToken},function(module,exports,__webpack_require__){"use strict";module.exports=function(callback){return function(arr){return callback.apply(null,arr)}}},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(2),__webpack_require__(49),__webpack_require__(50),__webpack_require__(51),__webpack_require__(52),__webpack_require__(54)},function(module,exports,__webpack_require__){"use strict";var g,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};g=function(){return this}();try{g=g||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":_typeof(window))&&(g=window)}module.exports=g},function(module,exports,__webpack_require__){"use strict";var Promise=__webpack_require__(2);module.exports=Promise,Promise.prototype.done=function(onFulfilled,onRejected){(arguments.length?this.then.apply(this,arguments):this).then(null,function(err){setTimeout(function(){throw err},0)})}},function(module,exports,__webpack_require__){"use strict";var Promise=__webpack_require__(2);module.exports=Promise,Promise.prototype.finally=function(f){return this.then(function(value){return Promise.resolve(f()).then(function(){return value})},function(err){return Promise.resolve(f()).then(function(){throw err})})}},function(module,exports,__webpack_require__){"use strict";function valuePromise(value){var p=new Promise(Promise._44);return p._83=1,p._18=value,p}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},Promise=__webpack_require__(2);module.exports=Promise;var TRUE=valuePromise(!0),FALSE=valuePromise(!1),NULL=valuePromise(null),UNDEFINED=valuePromise(void 0),ZERO=valuePromise(0),EMPTYSTRING=valuePromise("");Promise.resolve=function(value){if(value instanceof Promise)return value;if(null===value)return NULL;if(void 0===value)return UNDEFINED;if(!0===value)return TRUE;if(!1===value)return FALSE;if(0===value)return ZERO;if(""===value)return EMPTYSTRING;if("object"===(void 0===value?"undefined":_typeof(value))||"function"==typeof value)try{var then=value.then;if("function"==typeof then)return new Promise(then.bind(value))}catch(ex){return new Promise(function(resolve,reject){reject(ex)})}return valuePromise(value)},Promise.all=function(arr){var args=Array.prototype.slice.call(arr);return new Promise(function(resolve,reject){function res(i,val){if(val&&("object"===(void 0===val?"undefined":_typeof(val))||"function"==typeof val)){if(val instanceof Promise&&val.then===Promise.prototype.then){for(;3===val._83;)val=val._18;return 1===val._83?res(i,val._18):(2===val._83&&reject(val._18),void val.then(function(val){res(i,val)},reject))}var then=val.then;if("function"==typeof then){return void new Promise(then.bind(val)).then(function(val){res(i,val)},reject)}}args[i]=val,0==--remaining&&resolve(args)}if(0===args.length)return resolve([]);for(var remaining=args.length,i=0;i<args.length;i++)res(i,args[i])})},Promise.reject=function(value){return new Promise(function(resolve,reject){reject(value)})},Promise.race=function(values){return new Promise(function(resolve,reject){values.forEach(function(value){Promise.resolve(value).then(resolve,reject)})})},Promise.prototype.catch=function(onRejected){return this.then(null,onRejected)}},function(module,exports,__webpack_require__){"use strict";function denodeifyWithCount(fn,argumentCount){for(var args=[],i=0;i<argumentCount;i++)args.push("a"+i);var body=["return function ("+args.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(args).concat([callbackFn]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],body)(Promise,fn)}function denodeifyWithoutCount(fn){for(var fnLength=Math.max(fn.length-1,3),args=[],i=0;i<fnLength;i++)args.push("a"+i);var body=["return function ("+args.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+fnLength+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+callbackFn+";","var res;","switch (argLength) {",args.concat(["extra"]).map(function(_,index){return"case "+index+":res = fn.call("+["self"].concat(args.slice(0,index)).concat("cb").join(",")+");break;"}).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],body)(Promise,fn)}var Promise=__webpack_require__(2),asap=__webpack_require__(53);module.exports=Promise,Promise.denodeify=function(fn,argumentCount){return"number"==typeof argumentCount&&argumentCount!==1/0?denodeifyWithCount(fn,argumentCount):denodeifyWithoutCount(fn)};var callbackFn="function (err, res) {if (err) { rj(err); } else { rs(res); }}";Promise.nodeify=function(fn){return function(){var args=Array.prototype.slice.call(arguments),callback="function"==typeof args[args.length-1]?args.pop():null,ctx=this;try{return fn.apply(this,arguments).nodeify(callback,ctx)}catch(ex){if(null===callback||void 0===callback)return new Promise(function(resolve,reject){reject(ex)});asap(function(){callback.call(ctx,ex)})}}},Promise.prototype.nodeify=function(callback,ctx){if("function"!=typeof callback)return this;this.then(function(value){asap(function(){callback.call(ctx,null,value)})},function(err){asap(function(){callback.call(ctx,err)})})}},function(module,exports,__webpack_require__){"use strict";function throwFirstError(){if(pendingErrors.length)throw pendingErrors.shift()}function asap(task){var rawTask;rawTask=freeTasks.length?freeTasks.pop():new RawTask,rawTask.task=task,rawAsap(rawTask)}function RawTask(){this.task=null}var rawAsap=__webpack_require__(15),freeTasks=[],pendingErrors=[],requestErrorThrow=rawAsap.makeRequestCallFromTimer(throwFirstError);module.exports=asap,RawTask.prototype.call=function(){try{this.task.call()}catch(error){asap.onerror?asap.onerror(error):(pendingErrors.push(error),requestErrorThrow())}finally{this.task=null,freeTasks[freeTasks.length]=this}}},function(module,exports,__webpack_require__){"use strict";var Promise=__webpack_require__(2);module.exports=Promise,Promise.enableSynchronous=function(){Promise.prototype.isPending=function(){return 0==this.getState()},Promise.prototype.isFulfilled=function(){return 1==this.getState()},Promise.prototype.isRejected=function(){return 2==this.getState()},Promise.prototype.getValue=function(){if(3===this._83)return this._18.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._18},Promise.prototype.getReason=function(){if(3===this._83)return this._18.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._18},Promise.prototype.getState=function(){return 3===this._83?this._18.getState():-1===this._83||-2===this._83?0:this._83}},Promise.disableSynchronous=function(){Promise.prototype.isPending=void 0,Promise.prototype.isFulfilled=void 0,Promise.prototype.isRejected=void 0,Promise.prototype.getValue=void 0,Promise.prototype.getReason=void 0,Promise.prototype.getState=void 0}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var errors_1=__webpack_require__(7),ConnectivityError=function(_errors_1$NetworkTest){function ConnectivityError(message){_classCallCheck(this,ConnectivityError);var _this=_possibleConstructorReturn(this,(ConnectivityError.__proto__||Object.getPrototypeOf(ConnectivityError)).call(this,message));return Object.setPrototypeOf(_this,ConnectivityError.prototype),_this.name=_this.constructor.name,_this}return _inherits(ConnectivityError,_errors_1$NetworkTest),ConnectivityError}(errors_1.NetworkTestError);exports.ConnectivityError=ConnectivityError;var APIConnectivityError=function(_ConnectivityError){function APIConnectivityError(){_classCallCheck(this,APIConnectivityError);var _this2=_possibleConstructorReturn(this,(APIConnectivityError.__proto__||Object.getPrototypeOf(APIConnectivityError)).call(this,"Failed to connect to OpenTOK API Server"));return Object.setPrototypeOf(_this2,APIConnectivityError.prototype),_this2.name=_this2.constructor.name,_this2}return _inherits(APIConnectivityError,_ConnectivityError),APIConnectivityError}(ConnectivityError);exports.APIConnectivityError=APIConnectivityError;var ConnectToSessionError=function(_ConnectivityError2){function ConnectToSessionError(message){_classCallCheck(this,ConnectToSessionError);var _this3=_possibleConstructorReturn(this,(ConnectToSessionError.__proto__||Object.getPrototypeOf(ConnectToSessionError)).call(this,message||"Failed to connect to the session due to a network error."));return Object.setPrototypeOf(_this3,ConnectToSessionError.prototype),_this3.name=_this3.constructor.name,_this3}return _inherits(ConnectToSessionError,_ConnectivityError2),ConnectToSessionError}(ConnectivityError);exports.ConnectToSessionError=ConnectToSessionError;var ConnectToSessionTokenError=function(_ConnectToSessionErro){function ConnectToSessionTokenError(){return _classCallCheck(this,ConnectToSessionTokenError),_possibleConstructorReturn(this,(ConnectToSessionTokenError.__proto__||Object.getPrototypeOf(ConnectToSessionTokenError)).call(this,"Failed to connect to the session due to an invalid token."))}return _inherits(ConnectToSessionTokenError,_ConnectToSessionErro),ConnectToSessionTokenError}(ConnectToSessionError);exports.ConnectToSessionTokenError=ConnectToSessionTokenError;var ConnectToSessionSessionIdError=function(_ConnectToSessionErro2){function ConnectToSessionSessionIdError(){return _classCallCheck(this,ConnectToSessionSessionIdError),_possibleConstructorReturn(this,(ConnectToSessionSessionIdError.__proto__||Object.getPrototypeOf(ConnectToSessionSessionIdError)).call(this,"Failed to connect to the session due to an invalid session ID."))}return _inherits(ConnectToSessionSessionIdError,_ConnectToSessionErro2),ConnectToSessionSessionIdError}(ConnectToSessionError);exports.ConnectToSessionSessionIdError=ConnectToSessionSessionIdError;var ConnectToSessionNetworkError=function(_ConnectToSessionErro3){function ConnectToSessionNetworkError(){_classCallCheck(this,ConnectToSessionNetworkError);var _this6=_possibleConstructorReturn(this,(ConnectToSessionNetworkError.__proto__||Object.getPrototypeOf(ConnectToSessionNetworkError)).call(this,"Failed to connect to the session due to a network error."));return Object.setPrototypeOf(_this6,ConnectToSessionNetworkError.prototype),_this6.name=_this6.constructor.name,_this6}return _inherits(ConnectToSessionNetworkError,_ConnectToSessionErro3),ConnectToSessionNetworkError}(ConnectToSessionError);exports.ConnectToSessionNetworkError=ConnectToSessionNetworkError;var MediaDeviceError=function(_ConnectivityError3){function MediaDeviceError(message){_classCallCheck(this,MediaDeviceError);var _this7=_possibleConstructorReturn(this,(MediaDeviceError.__proto__||Object.getPrototypeOf(MediaDeviceError)).call(this,message||"OpenTok failed to find media devices for this browser."));return Object.setPrototypeOf(_this7,MediaDeviceError.prototype),_this7.name=_this7.constructor.name,_this7}return _inherits(MediaDeviceError,_ConnectivityError3),MediaDeviceError}(ConnectivityError);exports.MediaDeviceError=MediaDeviceError;var FailedToObtainMediaDevices=function(_MediaDeviceError){function FailedToObtainMediaDevices(){return _classCallCheck(this,FailedToObtainMediaDevices),_possibleConstructorReturn(this,(FailedToObtainMediaDevices.__proto__||Object.getPrototypeOf(FailedToObtainMediaDevices)).call(this,"Failed to obtain media devices."))}return _inherits(FailedToObtainMediaDevices,_MediaDeviceError),FailedToObtainMediaDevices}(MediaDeviceError);exports.FailedToObtainMediaDevices=FailedToObtainMediaDevices;var NoVideoCaptureDevicesError=function(_MediaDeviceError2){function NoVideoCaptureDevicesError(){return _classCallCheck(this,NoVideoCaptureDevicesError),_possibleConstructorReturn(this,(NoVideoCaptureDevicesError.__proto__||Object.getPrototypeOf(NoVideoCaptureDevicesError)).call(this,"This browser has no video capture devices"))}return _inherits(NoVideoCaptureDevicesError,_MediaDeviceError2),NoVideoCaptureDevicesError}(MediaDeviceError);exports.NoVideoCaptureDevicesError=NoVideoCaptureDevicesError;var NoAudioCaptureDevicesError=function(_MediaDeviceError3){function NoAudioCaptureDevicesError(){return _classCallCheck(this,NoAudioCaptureDevicesError),_possibleConstructorReturn(this,(NoAudioCaptureDevicesError.__proto__||Object.getPrototypeOf(NoAudioCaptureDevicesError)).call(this,"This browser has no audio capture devices."))}return _inherits(NoAudioCaptureDevicesError,_MediaDeviceError3),NoAudioCaptureDevicesError}(MediaDeviceError);exports.NoAudioCaptureDevicesError=NoAudioCaptureDevicesError;var PublishToSessionError=function(_ConnectivityError4){function PublishToSessionError(message){_classCallCheck(this,PublishToSessionError);var _this11=_possibleConstructorReturn(this,(PublishToSessionError.__proto__||Object.getPrototypeOf(PublishToSessionError)).call(this,message||"Encountered an unknown error while attempting to publish to a session."));return Object.setPrototypeOf(_this11,PublishToSessionError.prototype),_this11.name=_this11.constructor.name,_this11}return _inherits(PublishToSessionError,_ConnectivityError4),PublishToSessionError}(ConnectivityError);exports.PublishToSessionError=PublishToSessionError;var FailedMessagingServerTestError=function(_PublishToSessionErro){function FailedMessagingServerTestError(){_classCallCheck(this,FailedMessagingServerTestError);return _possibleConstructorReturn(this,(FailedMessagingServerTestError.__proto__||Object.getPrototypeOf(FailedMessagingServerTestError)).call(this,"Failed to connect to media server due to messaging server connection failure"))}return _inherits(FailedMessagingServerTestError,_PublishToSessionErro),FailedMessagingServerTestError}(PublishToSessionError);exports.FailedMessagingServerTestError=FailedMessagingServerTestError;var FailedToCreateLocalPublisher=function(_PublishToSessionErro2){function FailedToCreateLocalPublisher(){return _classCallCheck(this,FailedToCreateLocalPublisher),_possibleConstructorReturn(this,(FailedToCreateLocalPublisher.__proto__||Object.getPrototypeOf(FailedToCreateLocalPublisher)).call(this,"Failed to create a local publisher object."))}return _inherits(FailedToCreateLocalPublisher,_PublishToSessionErro2),FailedToCreateLocalPublisher}(PublishToSessionError);exports.FailedToCreateLocalPublisher=FailedToCreateLocalPublisher;var PublishToSessionNotConnectedError=function(_PublishToSessionErro3){function PublishToSessionNotConnectedError(){return _classCallCheck(this,PublishToSessionNotConnectedError),_possibleConstructorReturn(this,(PublishToSessionNotConnectedError.__proto__||Object.getPrototypeOf(PublishToSessionNotConnectedError)).call(this,"Precall failed to publish to the session because it was not connected."))}return _inherits(PublishToSessionNotConnectedError,_PublishToSessionErro3),PublishToSessionNotConnectedError}(PublishToSessionError);exports.PublishToSessionNotConnectedError=PublishToSessionNotConnectedError;var PublishToSessionPermissionOrTimeoutError=function(_PublishToSessionErro4){function PublishToSessionPermissionOrTimeoutError(){return _classCallCheck(this,PublishToSessionPermissionOrTimeoutError),_possibleConstructorReturn(this,(PublishToSessionPermissionOrTimeoutError.__proto__||Object.getPrototypeOf(PublishToSessionPermissionOrTimeoutError)).call(this,"Precall failed to publish to the session due a permissions error or timeout."))}return _inherits(PublishToSessionPermissionOrTimeoutError,_PublishToSessionErro4),PublishToSessionPermissionOrTimeoutError}(PublishToSessionError);exports.PublishToSessionPermissionOrTimeoutError=PublishToSessionPermissionOrTimeoutError;var PublishToSessionNetworkError=function(_PublishToSessionErro5){function PublishToSessionNetworkError(){return _classCallCheck(this,PublishToSessionNetworkError),_possibleConstructorReturn(this,(PublishToSessionNetworkError.__proto__||Object.getPrototypeOf(PublishToSessionNetworkError)).call(this,"Precall failed to publish to the session due a network error."))}return _inherits(PublishToSessionNetworkError,_PublishToSessionErro5),PublishToSessionNetworkError}(PublishToSessionError);exports.PublishToSessionNetworkError=PublishToSessionNetworkError;var SubscribeToSessionError=function(_ConnectivityError5){function SubscribeToSessionError(message){_classCallCheck(this,SubscribeToSessionError);var _this17=_possibleConstructorReturn(this,(SubscribeToSessionError.__proto__||Object.getPrototypeOf(SubscribeToSessionError)).call(this,message||"Encountered an unknown error while attempting to subscribe to a session."));return Object.setPrototypeOf(_this17,SubscribeToSessionError.prototype),_this17.name=_this17.constructor.name,_this17}return _inherits(SubscribeToSessionError,_ConnectivityError5),SubscribeToSessionError}(ConnectivityError);exports.SubscribeToSessionError=SubscribeToSessionError;var LoggingServerConnectionError=function(_ConnectivityError6){function LoggingServerConnectionError(){_classCallCheck(this,LoggingServerConnectionError);var _this18=_possibleConstructorReturn(this,(LoggingServerConnectionError.__proto__||Object.getPrototypeOf(LoggingServerConnectionError)).call(this,"Failed to connect to the OpenTok logging server."));return Object.setPrototypeOf(_this18,LoggingServerConnectionError.prototype),_this18.name=_this18.constructor.name,_this18}return _inherits(LoggingServerConnectionError,_ConnectivityError6),LoggingServerConnectionError}(ConnectivityError);exports.LoggingServerConnectionError=LoggingServerConnectionError},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var FailureType;!function(FailureType){FailureType.APIConnectivityError="api",FailureType.ConnectToSessionNetworkError="api",FailureType.ConnectToSessionError="messaging",FailureType.MediaDeviceError="OpenTok.js",FailureType.PublishToSessionError="media",FailureType.SubscribeToSessionError="media",FailureType.LoggingServerConnectionError="logging",FailureType.ConnectivityError="OpenTok.js"}(FailureType=exports.FailureType||(exports.FailureType={}));var mapErrorToCase=function(error){return{error:error,type:function(){switch(error.name){case"APIConnectivityError":case"ConnectToSessionError":case"ConnectToSessionNetworkError":case"MediaDeviceError":case"PublishToSessionError":case"SubscribeToSessionError":case"LoggingServerConnectionError":return FailureType[error.name];default:return FailureType.ConnectivityError}}()}};exports.mapErrors=function(){for(var _len=arguments.length,errors=Array(_len),_key=0;_key<_len;_key++)errors[_key]=arguments[_key];return errors.map(mapErrorToCase)}},function(module,exports,__webpack_require__){"use strict";function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function connectToSession(session,token){return new Promise(function(resolve,reject){session.connection?resolve(session):session.connect(token,function(error){error&&reject(types_1.errorHasName(error,types_1.OTErrorType.AUTHENTICATION_ERROR)?new e.ConnectToSessionTokenError:types_1.errorHasName(error,types_1.OTErrorType.INVALID_SESSION_ID)?new e.ConnectToSessionSessionIdError:types_1.errorHasName(error,types_1.OTErrorType.CONNECT_FAILED)?new e.ConnectToSessionNetworkError:new e.ConnectToSessionError),resolve(session)})})}function validateDevices(OT){return new Promise(function(resolve,reject){OT.getDevices(function(error){var devices=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(error)reject(new e.FailedToObtainMediaDevices);else{var availableDevices=devices.reduce(function(acc,device){var type="audioInput"===device.kind?"audio":"video";return Object.assign({},acc,_defineProperty({},type,Object.assign({},acc[type],_defineProperty({},device.deviceId,device))))},{audio:{},video:{}});Object.keys(availableDevices.audio).length?Object.keys(availableDevices.video).length?resolve():reject(new e.NoVideoCaptureDevicesError):reject(new e.NoAudioCaptureDevicesError)}})})}function publishAndSubscribe(OT){return function(session){return new Promise(function(resolve,reject){var containerDiv=document.createElement("div");containerDiv.style.position="fixed",containerDiv.style.bottom="-1px",containerDiv.style.width="1px",containerDiv.style.height="1px",containerDiv.style.opacity="0",document.body.appendChild(containerDiv);var publisherOptions={resolution:"1280x720",width:"100%",height:"100%",insertMode:"append",showControls:!1};validateDevices(OT).then(function(){var publisher=OT.initPublisher(containerDiv,publisherOptions,function(error){error?reject(new e.InitPublisherError(error.message)):session.publish(publisher,function(publishError){if(publishError)return reject(types_1.errorHasName(publishError,types_1.OTErrorType.NOT_CONNECTED)?new e.PublishToSessionNotConnectedError:types_1.errorHasName(publishError,types_1.OTErrorType.UNABLE_TO_PUBLISH)?new e.PublishToSessionPermissionOrTimeoutError:new e.PublishToSessionError)})});publisher.on("streamCreated",function(event){var subscriber=session.subscribe(event.stream,containerDiv,{testNetwork:!0,insertMode:"append"},function(subscribeError){return subscribeError?reject(new e.SubscribeToSessionError(subscribeError.message)):resolve(subscriber)})})}).catch(reject)})}}function subscribeToTestStream(OT,session,credentials){return new Promise(function(resolve,reject){connectToSession(session,credentials.token).then(publishAndSubscribe(OT)).then(resolve).catch(reject)})}function buildResults(builder){var baseProps=["bitrate","packetLossRatio","supported","reason"];return{mos:builder.state.qualityScore(),audio:util_1.pick(baseProps,builder.state.stats.audio),video:util_1.pick(baseProps.concat(["frameRate","recommendedResolution","recommendedFrameRate"]),builder.state.stats.video)}}function isAudioQualityAcceptable(results){return!!results.audio.bitrate&&results.audio.bitrate>config_1.default.qualityThresholds.audio[0].bps&&(!!results.audio.packetLossRatio&&results.audio.packetLossRatio<config_1.default.qualityThresholds.audio[0].plr||0===results.audio.packetLossRatio)}function checkSubscriberQuality(OT,session,credentials,onUpdate){var mosEstimatorTimeoutId=void 0;return new Promise(function(resolve,reject){subscribeToTestStream(OT,session,credentials).then(function(subscriber){if(subscriber)try{var builder=Object.assign({state:new MOSState_1.default},{subscriber:subscriber},{credentials:credentials}),getStatsListener=function(error,stats){stats&&onUpdate&&onUpdate(function(subscriberStats){return Object.assign({},subscriberStats,{phase:audioOnly?"audio-only":"audio-video"})}(stats))},processResults=function(){var audioVideoResults=buildResults(builder);audioOnly||isAudioQualityAcceptable(audioVideoResults)?(session.on("sessionDisconnected",function(){resolve(audioVideoResults),session.off()}),session.disconnect()):(audioOnly=!0,checkSubscriberQuality(OT,session,credentials,onUpdate).then(function(results){resolve(results)}))},resultsCallback=function(state){clearTimeout(mosEstimatorTimeoutId),processResults()};subscriberMOS_1.default(builder.state,subscriber,getStatsListener,resultsCallback),mosEstimatorTimeoutId=window.setTimeout(processResults,audioOnly?config_1.default.getStatsAudioOnlyDuration:config_1.default.getStatsVideoAndAudioTestDuration)}catch(exception){reject(new e.SubscriberGetStatsError)}else reject(new e.MissingSubscriberError)}).catch(reject)})}function validateBrowser(){return new Promise(function(resolve,reject){var _isSupportedBrowser_=isSupportedBrowser_1.default(),supported=_isSupportedBrowser_.supported,browser=_isSupportedBrowser_.browser;return supported?resolve():reject(new e.UnsupportedBrowserError(browser))})}function testQuality(OT,credentials,otLogging,onUpdate,onComplete){return new Promise(function(resolve,reject){var onSuccess=function(results){onComplete&&onComplete(void 0,results),otLogging.logEvent({action:"testQuality",variation:"Success"}),resolve(results)},onError=function(error){otLogging.logEvent({action:"testQuality",variation:"Failure"}),onComplete&&onComplete(error,null),reject(error)};validateBrowser().then(function(){var session=OT.initSession(credentials.apiKey,credentials.sessionId);checkSubscriberQuality(OT,session,credentials,onUpdate).then(onSuccess).catch(onError)}).catch(onError)})}Object.defineProperty(exports,"__esModule",{value:!0});var Promise=__webpack_require__(14),util_1=__webpack_require__(3),e=__webpack_require__(58),types_1=__webpack_require__(16),subscriberMOS_1=__webpack_require__(59),MOSState_1=__webpack_require__(19),config_1=__webpack_require__(4),isSupportedBrowser_1=__webpack_require__(63),audioOnly=!1;exports.default=testQuality},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var errors_1=__webpack_require__(7),QualityTestError=function(_errors_1$NetworkTest){function QualityTestError(message){_classCallCheck(this,QualityTestError);var _this=_possibleConstructorReturn(this,(QualityTestError.__proto__||Object.getPrototypeOf(QualityTestError)).call(this,message));return Object.setPrototypeOf(_this,QualityTestError.prototype),_this.name=_this.constructor.name,_this.stack=new Error(message).stack,_this}return _inherits(QualityTestError,_errors_1$NetworkTest),QualityTestError}(errors_1.NetworkTestError);exports.QualityTestError=QualityTestError;var UnsupportedBrowserError=function(_QualityTestError){function UnsupportedBrowserError(browser){_classCallCheck(this,UnsupportedBrowserError);var message="Your current browser ("+browser+") does not support the audio-video quality test. Please run the test in Chrome or Firefox.",_this2=_possibleConstructorReturn(this,(UnsupportedBrowserError.__proto__||Object.getPrototypeOf(UnsupportedBrowserError)).call(this,message));return Object.setPrototypeOf(_this2,UnsupportedBrowserError.prototype),_this2.name=_this2.constructor.name,_this2}return _inherits(UnsupportedBrowserError,_QualityTestError),UnsupportedBrowserError}(QualityTestError);exports.UnsupportedBrowserError=UnsupportedBrowserError;var ConnectToSessionError=function(_QualityTestError2){function ConnectToSessionError(message){_classCallCheck(this,ConnectToSessionError);var _this3=_possibleConstructorReturn(this,(ConnectToSessionError.__proto__||Object.getPrototypeOf(ConnectToSessionError)).call(this,message||"Failed to connect to the session due to a network error."));return Object.setPrototypeOf(_this3,ConnectToSessionError.prototype),_this3.name=_this3.constructor.name,_this3}return _inherits(ConnectToSessionError,_QualityTestError2),ConnectToSessionError}(QualityTestError);exports.ConnectToSessionError=ConnectToSessionError;var ConnectToSessionTokenError=function(_ConnectToSessionErro){function ConnectToSessionTokenError(){return _classCallCheck(this,ConnectToSessionTokenError),_possibleConstructorReturn(this,(ConnectToSessionTokenError.__proto__||Object.getPrototypeOf(ConnectToSessionTokenError)).call(this,"Failed to connect to the session due to an invalid token."))}return _inherits(ConnectToSessionTokenError,_ConnectToSessionErro),ConnectToSessionTokenError}(ConnectToSessionError);exports.ConnectToSessionTokenError=ConnectToSessionTokenError;var ConnectToSessionSessionIdError=function(_ConnectToSessionErro2){function ConnectToSessionSessionIdError(){return _classCallCheck(this,ConnectToSessionSessionIdError),_possibleConstructorReturn(this,(ConnectToSessionSessionIdError.__proto__||Object.getPrototypeOf(ConnectToSessionSessionIdError)).call(this,"Failed to connect to the session due to an invalid session ID."))}return _inherits(ConnectToSessionSessionIdError,_ConnectToSessionErro2),ConnectToSessionSessionIdError}(ConnectToSessionError);exports.ConnectToSessionSessionIdError=ConnectToSessionSessionIdError;var ConnectToSessionNetworkError=function(_ConnectToSessionErro3){function ConnectToSessionNetworkError(){return _classCallCheck(this,ConnectToSessionNetworkError),_possibleConstructorReturn(this,(ConnectToSessionNetworkError.__proto__||Object.getPrototypeOf(ConnectToSessionNetworkError)).call(this,"Failed to connect to the session due to a network error."))}return _inherits(ConnectToSessionNetworkError,_ConnectToSessionErro3),ConnectToSessionNetworkError}(ConnectToSessionError);exports.ConnectToSessionNetworkError=ConnectToSessionNetworkError;var MediaDeviceError=function(_QualityTestError3){function MediaDeviceError(message){_classCallCheck(this,MediaDeviceError);var _this7=_possibleConstructorReturn(this,(MediaDeviceError.__proto__||Object.getPrototypeOf(MediaDeviceError)).call(this,message||"OpenTok failed to find media devices for this browser."));return Object.setPrototypeOf(_this7,MediaDeviceError.prototype),_this7.name=_this7.constructor.name,_this7}return _inherits(MediaDeviceError,_QualityTestError3),MediaDeviceError}(QualityTestError);exports.MediaDeviceError=MediaDeviceError;var FailedToObtainMediaDevices=function(_QualityTestError4){function FailedToObtainMediaDevices(){return _classCallCheck(this,FailedToObtainMediaDevices),_possibleConstructorReturn(this,(FailedToObtainMediaDevices.__proto__||Object.getPrototypeOf(FailedToObtainMediaDevices)).call(this,"Failed to obtain media devices."))}return _inherits(FailedToObtainMediaDevices,_QualityTestError4),FailedToObtainMediaDevices}(QualityTestError);exports.FailedToObtainMediaDevices=FailedToObtainMediaDevices;var NoVideoCaptureDevicesError=function(_QualityTestError5){function NoVideoCaptureDevicesError(){return _classCallCheck(this,NoVideoCaptureDevicesError),_possibleConstructorReturn(this,(NoVideoCaptureDevicesError.__proto__||Object.getPrototypeOf(NoVideoCaptureDevicesError)).call(this,"This browser has no video capture devices"))}return _inherits(NoVideoCaptureDevicesError,_QualityTestError5),NoVideoCaptureDevicesError}(QualityTestError);exports.NoVideoCaptureDevicesError=NoVideoCaptureDevicesError;var NoAudioCaptureDevicesError=function(_QualityTestError6){function NoAudioCaptureDevicesError(){return _classCallCheck(this,NoAudioCaptureDevicesError),_possibleConstructorReturn(this,(NoAudioCaptureDevicesError.__proto__||Object.getPrototypeOf(NoAudioCaptureDevicesError)).call(this,"This browser has no audio capture devices."))}return _inherits(NoAudioCaptureDevicesError,_QualityTestError6),NoAudioCaptureDevicesError}(QualityTestError);exports.NoAudioCaptureDevicesError=NoAudioCaptureDevicesError;var PublishToSessionError=function(_QualityTestError7){function PublishToSessionError(message){_classCallCheck(this,PublishToSessionError);var _this11=_possibleConstructorReturn(this,(PublishToSessionError.__proto__||Object.getPrototypeOf(PublishToSessionError)).call(this,message||"Encountered an unknown error while attempting to publish to a session."));return Object.setPrototypeOf(_this11,PublishToSessionError.prototype),_this11.name=_this11.constructor.name,_this11}return _inherits(PublishToSessionError,_QualityTestError7),PublishToSessionError}(QualityTestError);exports.PublishToSessionError=PublishToSessionError;var InitPublisherError=function(_PublishToSessionErro){function InitPublisherError(message){return _classCallCheck(this,InitPublisherError),_possibleConstructorReturn(this,(InitPublisherError.__proto__||Object.getPrototypeOf(InitPublisherError)).call(this,message||"Failed to initialize publisher."))}return _inherits(InitPublisherError,_PublishToSessionErro),InitPublisherError}(PublishToSessionError);exports.InitPublisherError=InitPublisherError;var PublishToSessionNotConnectedError=function(_PublishToSessionErro2){function PublishToSessionNotConnectedError(){return _classCallCheck(this,PublishToSessionNotConnectedError),_possibleConstructorReturn(this,(PublishToSessionNotConnectedError.__proto__||Object.getPrototypeOf(PublishToSessionNotConnectedError)).call(this,"Precall failed to publish to the session because it was not connected."))}return _inherits(PublishToSessionNotConnectedError,_PublishToSessionErro2),PublishToSessionNotConnectedError}(PublishToSessionError);exports.PublishToSessionNotConnectedError=PublishToSessionNotConnectedError;var PublishToSessionPermissionOrTimeoutError=function(_PublishToSessionErro3){function PublishToSessionPermissionOrTimeoutError(){return _classCallCheck(this,PublishToSessionPermissionOrTimeoutError),_possibleConstructorReturn(this,(PublishToSessionPermissionOrTimeoutError.__proto__||Object.getPrototypeOf(PublishToSessionPermissionOrTimeoutError)).call(this,"Precall failed to publish to the session due a permissions error or timeout."))}return _inherits(PublishToSessionPermissionOrTimeoutError,_PublishToSessionErro3),PublishToSessionPermissionOrTimeoutError}(PublishToSessionError);exports.PublishToSessionPermissionOrTimeoutError=PublishToSessionPermissionOrTimeoutError;var SubscribeToSessionError=function(_QualityTestError8){function SubscribeToSessionError(message){_classCallCheck(this,SubscribeToSessionError);var _this15=_possibleConstructorReturn(this,(SubscribeToSessionError.__proto__||Object.getPrototypeOf(SubscribeToSessionError)).call(this,message||"Encountered an unknown error while attempting to publish to a session."));return Object.setPrototypeOf(_this15,SubscribeToSessionError.prototype),_this15.name=_this15.constructor.name,_this15}return _inherits(SubscribeToSessionError,_QualityTestError8),SubscribeToSessionError}(QualityTestError);exports.SubscribeToSessionError=SubscribeToSessionError;var SubscriberGetStatsError=function(_SubscribeToSessionEr){function SubscriberGetStatsError(){return _classCallCheck(this,SubscriberGetStatsError),_possibleConstructorReturn(this,(SubscriberGetStatsError.__proto__||Object.getPrototypeOf(SubscriberGetStatsError)).call(this,"Failed to get network stats for a subscriber."))}return _inherits(SubscriberGetStatsError,_SubscribeToSessionEr),SubscriberGetStatsError}(SubscribeToSessionError);exports.SubscriberGetStatsError=SubscriberGetStatsError;var MissingSubscriberError=function(_SubscribeToSessionEr2){function MissingSubscriberError(){return _classCallCheck(this,MissingSubscriberError),_possibleConstructorReturn(this,(MissingSubscriberError.__proto__||Object.getPrototypeOf(MissingSubscriberError)).call(this,"Call checkSubscribeToSession before calling checkSubscriberQuality."))}return _inherits(MissingSubscriberError,_SubscribeToSessionEr2),MissingSubscriberError}(SubscribeToSessionError);exports.MissingSubscriberError=MissingSubscriberError},function(module,exports,__webpack_require__){"use strict";function calculateVideoScore(subscriber,stats){var currentStats=util_1.last(stats),lastStats=util_1.nth(-2,stats);if(!currentStats||!lastStats||!subscriber.stream)return 0;var totalPackets=calculateTotalPackets("video",currentStats,lastStats),baseBitrate=(getPacketsLost(currentStats.video),getPacketsLost(lastStats.video),currentStats.timestamp,lastStats.timestamp,calculateBitRate("video",currentStats,lastStats)),pixelCount=subscriber.stream.videoDimensions.width*subscriber.stream.videoDimensions.height,targetBitrate=function(pixelCount){var y=2.069924867*Math.pow(Math.log10(pixelCount),.6250223771);return Math.pow(10,y)}(pixelCount);if(baseBitrate<3e4)return 0;var bitrate=Math.min(baseBitrate,targetBitrate);return Math.log(bitrate/3e4)/Math.log(targetBitrate/3e4)*4+1}function calculateAudioScore(subscriber,stats){var currentStats=util_1.last(stats),lastStats=util_1.nth(-2,stats);if(!currentStats||!lastStats||!subscriber.stream)return 0;var totalAudioPackets=calculateTotalPackets("audio",currentStats,lastStats);if(0===totalAudioPackets)return 0;var packetLossRatio=getPacketsLost(currentStats.audio)-getPacketsLost(lastStats.audio)/totalAudioPackets;return function(roundTripTime,packetLossRatio){var h=function(x){return x<0?0:1};return function(R){return R<0?1:R>100?4.5:1+.035*R+71e-7*R*(R-60)*(100-R)}(function(){var d=roundTripTime+20;return 94.2-(.024*d+.11)*(d-177.3)*h(d-177.3)-19.8*Math.log(1+29.7*packetLossRatio)}())}(0,packetLossRatio)}function subscriberMOS(mosState,subscriber,getStatsListener,callback){return mosState.intervalId=window.setInterval(function(){subscriber.getStats(function(error,stats){if(!stats)return null;if(stats.audio.bytesReceived<0||stats.video.bytesReceived<0)return mosState.clearInterval(),callback(mosState);if(stats&&mosState.statsLog.push(stats),getStatsListener&&"function"==typeof getStatsListener&&getStatsListener(error,stats),mosState.statsLog.length<2)return null;mosState.stats=calculateThroughput_1.default(mosState);var videoScore=calculateVideoScore(subscriber,mosState.statsLog);mosState.videoScoresLog.push(videoScore);var audioScore=calculateAudioScore(subscriber,mosState.statsLog);return mosState.audioScoresLog.push(audioScore),mosState.pruneScores(),isBitrateSteadyState_1.default(mosState.statsLog)?(mosState.clearInterval(),callback(mosState)):null})},MOSState_1.default.scoreInterval),subscriber.on("destroyed",mosState.clearInterval.bind(mosState)),mosState}Object.defineProperty(exports,"__esModule",{value:!0});var isBitrateSteadyState_1=__webpack_require__(60),calculateThroughput_1=__webpack_require__(61),MOSState_1=__webpack_require__(19),util_1=__webpack_require__(3),getPacketsLost=function(ts){return util_1.getOr(0,"packetsLost",ts)},getPacketsReceived=function(ts){return util_1.getOr(0,"packetsReceived",ts)},getTotalPackets=function(ts){return getPacketsLost(ts)+getPacketsReceived(ts)},calculateTotalPackets=function(type,current,last){return getTotalPackets(current[type])-getTotalPackets(last[type])},calculateBitRate=function(type,current,last){var interval=current.timestamp-last.timestamp;return current[type]&&current[type].bytesReceived?8*(current[type].bytesReceived-last[type].bytesReceived)/(interval/1e3):0};exports.default=subscriberMOS},function(module,exports,__webpack_require__){"use strict";function isBitrateSteadyState(statsList){var latestSamples=getLatestSampleWindow_1.default(statsList),steadyStateAllowedDelta=config_1.default.steadyStateAllowedDelta,isSteadyState=!0;if(latestSamples.length<config_1.default.minimumVideoAndAudioTestSampleSize)return!1;var statsBitrates=calculateQualityStats_1.default(latestSamples);return["video","audio"].forEach(function(avType){for(var i=1;i<statsBitrates[avType].length;i+=1){var currBitrate=statsBitrates[avType][i].averageBitrate,prevBitrate=statsBitrates[avType][i-1].averageBitrate;currBitrate-prevBitrate>prevBitrate*steadyStateAllowedDelta&&(isSteadyState=!1)}}),isSteadyState}Object.defineProperty(exports,"__esModule",{value:!0});var getLatestSampleWindow_1=__webpack_require__(17),calculateQualityStats_1=__webpack_require__(18),config_1=__webpack_require__(4);exports.default=isBitrateSteadyState},function(module,exports,__webpack_require__){"use strict";function getAverageBitrateAndPlr(type,statsList){var sumBps=0,sumPlr=0,sumFrameRate=0;statsList.forEach(function(stat){sumBps+=stat.averageBitrate,sumPlr+=stat.packetLossRatio,"video"===type&&(sumFrameRate+=Number(util_1.getOr(0,"frameRate",stat)))});var averageStats={bitrate:sumBps/statsList.length,packetLossRatio:sumPlr/statsList.length},_getQualityEvaluation=getQualityEvaluation_1.default(averageStats,type),supported=_getQualityEvaluation.supported,reason=_getQualityEvaluation.reason,recommendedResolution=_getQualityEvaluation.recommendedResolution,recommendedFrameRate=_getQualityEvaluation.recommendedFrameRate,videoStats="video"===type?{recommendedResolution:recommendedResolution,recommendedFrameRate:recommendedFrameRate,frameRate:sumFrameRate/statsList.length}:{};return Object.assign({},averageStats,{supported:supported,reason:reason},videoStats)}function calculateThroughput(state){var sampleWindow=getLatestSampleWindow_1.default(state.statsLog),qualityStats=calculateQualityStats_1.default(sampleWindow);return{audio:function(){return state.hasAudioTrack()?getAverageBitrateAndPlr("audio",qualityStats.audio):{supported:!1,reason:config_1.default.strings.noMic}}(),video:function(){return state.hasVideoTrack()?getAverageBitrateAndPlr("video",qualityStats.video):{supported:!1,reason:config_1.default.strings.noCam}}()}}Object.defineProperty(exports,"__esModule",{value:!0});var getLatestSampleWindow_1=__webpack_require__(17),calculateQualityStats_1=__webpack_require__(18),getQualityEvaluation_1=__webpack_require__(62),config_1=__webpack_require__(4),util_1=__webpack_require__(3);exports.default=calculateThroughput},function(module,exports,__webpack_require__){"use strict";function getQualityEvaluation(stats,type){for(var qualityThresholds=config_1.default.qualityThresholds,bitrate=stats.bitrate,packetLoss=stats.packetLossRatio,thresholds=qualityThresholds[type],supported=!1,recommendedFrameRate=30,recommendedResolution="",recommendedSetting=void 0,i=0;i<thresholds.length;i+=1){var threshold=thresholds[i];if(bitrate>=threshold.bps&&packetLoss<=threshold.plr){supported=!0,"video"===type&&(recommendedSetting=util_1.get("recommendedSetting",threshold),recommendedFrameRate=Number(recommendedSetting.substring(recommendedSetting.indexOf("@")+1).replace("FPS","")),recommendedResolution=recommendedSetting.substring(0,recommendedSetting.indexOf("@")-1));break}}var result={supported:supported,recommendedFrameRate:recommendedFrameRate,recommendedResolution:recommendedResolution};return supported?supported&&"video"===type&&(result.recommendedFrameRate=recommendedFrameRate,result.recommendedResolution=recommendedResolution):result.reason=config_1.default.strings.bandwidthLow,result}Object.defineProperty(exports,"__esModule",{value:!0});var config_1=__webpack_require__(4),util_1=__webpack_require__(3);exports.default=getQualityEvaluation},function(module,exports,__webpack_require__){"use strict";function detectBrowser(){var navigator=window&&window.navigator;return"undefined"!=typeof window&&window.navigator?navigator.mozGetUserMedia?"Firefox":navigator.webkitGetUserMedia?window.hasOwnProperty("webkitRTCPeerConnection")?"Chrome":navigator.userAgent.match(/Version\/(\d+).(\d+)/)?"Safari":"WebKit browser without WebRTC support":navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)?"Edge":navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.match(/Trident.*rv\:11\./)?"Internet Explorer":navigator.mediaDevices&&navigator.userAgent.match(/AppleWebKit\/(\d+)\./)?"Safari":"unsupported browser":"not a browser"}function isSupportedBrowser(){var supportedBrowsers=["Chrome","Firefox","Internet Explorer","Safari"],browser=detectBrowser();return{browser:browser,supported:supportedBrowsers.indexOf(browser)>-1}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=isSupportedBrowser},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,_typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function n(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}(),_extends=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n};"function"==typeof Symbol&&_typeof2(Symbol.iterator);!function(n,e){__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(65)],__WEBPACK_AMD_DEFINE_FACTORY__=e,void 0!==(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}(0,function(n){var e=!1,t=function(n,_t,o){if(e)return _t;var r="",i=void 0;o&&(i=new Date,i.setTime(i.getTime()+24*o*60*60*1e3),r=["; expires=",i.toGMTString()].join(""));var l=[n,"=",_t,r,"; path=/"].join("");return document.cookie=l,_t},o=function(n){if(e)return null;for(var t=n+"=",o=document.cookie.split(";"),r=void 0,i=0;i<o.length;i++){for(r=o[i];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return null},r=function(){for(var n=[],e="0123456789abcdef",t=0;t<36;t++)n.push(e.substr(Math.floor(16*Math.random()),1));return n[14]="4",n[19]=e.substr(3&n[19]|8,1),n[8]=n[13]=n[18]=n[23]="-",n.join("")},i=function(n){return o(n)||t(n,r(),7)},l=function(n){if(!n.clientVersion)throw console.log("Error. The clientVersion field cannot be null in the log entry"),new Error("The clientVersion field cannot be null in the log entry");if(!n.source)throw console.log("Error. The source field cannot be null in the log entry"),new Error("The source field cannot be null in the log entry");if(!n.componentId)throw console.log("Error. The componentId field cannot be null in the log entry"),new Error("The componentId field cannot be null in the log entry");if(!n.name)throw console.log("Error. The name field cannot be null in the log entry"),new Error("The guid field cannot be null in the log entry");var e=n.logVersion||"2",t=n.clientSystemTime||(new Date).getTime();return _extends({},n,{logVersion:e,clientSystemTime:t})},a=function(t){var o=l(t),r="https://hlg.tokbox.com/prod/logging/ClientEvent";if(e)n.post(r,o);else{var i=new XMLHttpRequest;i.open("POST",r,!0),i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify(o))}};return function(){function n(t,o){_classCallCheck(this,n),this.analyticsData=t,e=o&&o.server,this.analyticsData.guid=i(t.name)}return _createClass(n,[{key:"addSessionInfo",value:function(n){if(!n.sessionId)throw console.log("Error. The sessionId field cannot be null in the log entry"),new Error("The sessionId field cannot be null in the log entry");if(this.analyticsData.sessionId=n.sessionId,!n.connectionId)throw console.log("Error. The connectionId field cannot be null in the log entry"),new Error("The connectionId field cannot be null in the log entry");if(this.analyticsData.connectionId=n.connectionId,0===n.partnerId)throw console.log("Error. The partnerId field cannot be null in the log entry"),new Error("The partnerId field cannot be null in the log entry");this.analyticsData.partnerId=n.partnerId}},{key:"logEvent",value:function(n){this.analyticsData=_extends({},this.analyticsData,n,{clientSystemTime:(new Date).getTime()}),a(this.analyticsData)}}]),n}()})},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(66)},function(module,exports,__webpack_require__){"use strict";function createInstance(defaultConfig){var context=new Axios(defaultConfig),instance=bind(Axios.prototype.request,context);return utils.extend(instance,Axios.prototype,context),utils.extend(instance,context),instance}var utils=__webpack_require__(1),bind=__webpack_require__(20),Axios=__webpack_require__(67),defaults=__webpack_require__(8),axios=createInstance(defaults);axios.Axios=Axios,axios.create=function(instanceConfig){return createInstance(utils.merge(defaults,instanceConfig))},axios.Cancel=__webpack_require__(24),axios.CancelToken=__webpack_require__(81),axios.isCancel=__webpack_require__(23),axios.all=function(promises){return Promise.all(promises)},axios.spread=__webpack_require__(82),module.exports=axios,module.exports.default=axios},function(module,exports,__webpack_require__){"use strict";function Axios(instanceConfig){this.defaults=instanceConfig,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}var defaults=__webpack_require__(8),utils=__webpack_require__(1),InterceptorManager=__webpack_require__(76),dispatchRequest=__webpack_require__(77),isAbsoluteURL=__webpack_require__(79),combineURLs=__webpack_require__(80);Axios.prototype.request=function(config){"string"==typeof config&&(config=utils.merge({url:arguments[0]},arguments[1])),config=utils.merge(defaults,this.defaults,{method:"get"},config),config.baseURL&&!isAbsoluteURL(config.url)&&(config.url=combineURLs(config.baseURL,config.url));var chain=[dispatchRequest,void 0],promise=Promise.resolve(config);for(this.interceptors.request.forEach(function(interceptor){chain.unshift(interceptor.fulfilled,interceptor.rejected)}),this.interceptors.response.forEach(function(interceptor){chain.push(interceptor.fulfilled,interceptor.rejected)});chain.length;)promise=promise.then(chain.shift(),chain.shift());return promise},utils.forEach(["delete","get","head"],function(method){Axios.prototype[method]=function(url,config){return this.request(utils.merge(config||{},{method:method,url:url}))}}),utils.forEach(["post","put","patch"],function(method){Axios.prototype[method]=function(url,data,config){return this.request(utils.merge(config||{},{method:method,url:url,data:data}))}}),module.exports=Axios},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(1);module.exports=function(headers,normalizedName){utils.forEach(headers,function(value,name){name!==normalizedName&&name.toUpperCase()===normalizedName.toUpperCase()&&(headers[normalizedName]=value,delete headers[name])})}},function(module,exports,__webpack_require__){"use strict";var createError=__webpack_require__(22);module.exports=function(resolve,reject,response){var validateStatus=response.config.validateStatus;response.status&&validateStatus&&!validateStatus(response.status)?reject(createError("Request failed with status code "+response.status,response.config,null,response)):resolve(response)}},function(module,exports,__webpack_require__){"use strict";module.exports=function(error,config,code,response){return error.config=config,code&&(error.code=code),error.response=response,error}},function(module,exports,__webpack_require__){"use strict";function encode(val){return encodeURIComponent(val).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var utils=__webpack_require__(1);module.exports=function(url,params,paramsSerializer){if(!params)return url;var serializedParams;if(paramsSerializer)serializedParams=paramsSerializer(params);else if(utils.isURLSearchParams(params))serializedParams=params.toString();else{var parts=[];utils.forEach(params,function(val,key){null!==val&&void 0!==val&&(utils.isArray(val)&&(key+="[]"),utils.isArray(val)||(val=[val]),utils.forEach(val,function(v){utils.isDate(v)?v=v.toISOString():utils.isObject(v)&&(v=JSON.stringify(v)),parts.push(encode(key)+"="+encode(v))}))}),serializedParams=parts.join("&")}return serializedParams&&(url+=(-1===url.indexOf("?")?"?":"&")+serializedParams),url}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(1);module.exports=function(headers){var key,val,i,parsed={};return headers?(utils.forEach(headers.split("\n"),function(line){i=line.indexOf(":"),key=utils.trim(line.substr(0,i)).toLowerCase(),val=utils.trim(line.substr(i+1)),key&&(parsed[key]=parsed[key]?parsed[key]+", "+val:val)}),parsed):parsed}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(1);module.exports=utils.isStandardBrowserEnv()?function(){function resolveURL(url){var href=url;return msie&&(urlParsingNode.setAttribute("href",href),href=urlParsingNode.href),urlParsingNode.setAttribute("href",href),{href:urlParsingNode.href,protocol:urlParsingNode.protocol?urlParsingNode.protocol.replace(/:$/,""):"",host:urlParsingNode.host,search:urlParsingNode.search?urlParsingNode.search.replace(/^\?/,""):"",hash:urlParsingNode.hash?urlParsingNode.hash.replace(/^#/,""):"",hostname:urlParsingNode.hostname,port:urlParsingNode.port,pathname:"/"===urlParsingNode.pathname.charAt(0)?urlParsingNode.pathname:"/"+urlParsingNode.pathname}}var originURL,msie=/(msie|trident)/i.test(navigator.userAgent),urlParsingNode=document.createElement("a");return originURL=resolveURL(window.location.href),function(requestURL){var parsed=utils.isString(requestURL)?resolveURL(requestURL):requestURL;return parsed.protocol===originURL.protocol&&parsed.host===originURL.host}}():function(){return function(){return!0}}()},function(module,exports,__webpack_require__){"use strict";function E(){this.message="String contains an invalid character"}function btoa(input){for(var block,charCode,str=String(input),output="",idx=0,map=chars;str.charAt(0|idx)||(map="=",idx%1);output+=map.charAt(63&block>>8-idx%1*8)){if((charCode=str.charCodeAt(idx+=.75))>255)throw new E;block=block<<8|charCode}return output}var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";E.prototype=new Error,E.prototype.code=5,E.prototype.name="InvalidCharacterError",module.exports=btoa},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(1);module.exports=utils.isStandardBrowserEnv()?function(){return{write:function(name,value,expires,path,domain,secure){var cookie=[];cookie.push(name+"="+encodeURIComponent(value)),utils.isNumber(expires)&&cookie.push("expires="+new Date(expires).toGMTString()),utils.isString(path)&&cookie.push("path="+path),utils.isString(domain)&&cookie.push("domain="+domain),!0===secure&&cookie.push("secure"),document.cookie=cookie.join("; ")},read:function(name){var match=document.cookie.match(new RegExp("(^|;\\s*)("+name+")=([^;]*)"));return match?decodeURIComponent(match[3]):null},remove:function(name){this.write(name,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(module,exports,__webpack_require__){"use strict";function InterceptorManager(){this.handlers=[]}var utils=__webpack_require__(1);InterceptorManager.prototype.use=function(fulfilled,rejected){return this.handlers.push({fulfilled:fulfilled,rejected:rejected}),this.handlers.length-1},InterceptorManager.prototype.eject=function(id){this.handlers[id]&&(this.handlers[id]=null)},InterceptorManager.prototype.forEach=function(fn){utils.forEach(this.handlers,function(h){null!==h&&fn(h)})},module.exports=InterceptorManager},function(module,exports,__webpack_require__){"use strict";function throwIfCancellationRequested(config){config.cancelToken&&config.cancelToken.throwIfRequested()}var utils=__webpack_require__(1),transformData=__webpack_require__(78),isCancel=__webpack_require__(23),defaults=__webpack_require__(8);module.exports=function(config){return throwIfCancellationRequested(config),config.headers=config.headers||{},config.data=transformData(config.data,config.headers,config.transformRequest),config.headers=utils.merge(config.headers.common||{},config.headers[config.method]||{},config.headers||{}),utils.forEach(["delete","get","head","post","put","patch","common"],function(method){delete config.headers[method]}),(config.adapter||defaults.adapter)(config).then(function(response){return throwIfCancellationRequested(config),response.data=transformData(response.data,response.headers,config.transformResponse),response},function(reason){return isCancel(reason)||(throwIfCancellationRequested(config),reason&&reason.response&&(reason.response.data=transformData(reason.response.data,reason.response.headers,config.transformResponse))),Promise.reject(reason)})}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(1);module.exports=function(data,headers,fns){return utils.forEach(fns,function(fn){data=fn(data,headers)}),data}},function(module,exports,__webpack_require__){"use strict";module.exports=function(url){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(url)}},function(module,exports,__webpack_require__){"use strict";module.exports=function(baseURL,relativeURL){return baseURL.replace(/\/+$/,"")+"/"+relativeURL.replace(/^\/+/,"")}},function(module,exports,__webpack_require__){"use strict";function CancelToken(executor){if("function"!=typeof executor)throw new TypeError("executor must be a function.");var resolvePromise;this.promise=new Promise(function(resolve){resolvePromise=resolve});var token=this;executor(function(message){token.reason||(token.reason=new Cancel(message),resolvePromise(token.reason))})}var Cancel=__webpack_require__(24);CancelToken.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},CancelToken.source=function(){var cancel;return{token:new CancelToken(function(c){cancel=c}),cancel:cancel}},module.exports=CancelToken},function(module,exports,__webpack_require__){"use strict";module.exports=function(callback){return function(arr){return callback.apply(null,arr)}}}])});